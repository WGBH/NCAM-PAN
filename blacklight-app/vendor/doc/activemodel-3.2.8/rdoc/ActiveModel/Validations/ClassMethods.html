<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />

  <title>Module: ActiveModel::Validations::ClassMethods</title>

  <link rel="stylesheet" href="../../rdoc.css" type="text/css" media="screen" />

  <script src="../../js/jquery.js" type="text/javascript" charset="utf-8"></script>
  <script src="../../js/thickbox-compressed.js" type="text/javascript" charset="utf-8"></script>
  <script src="../../js/quicksearch.js" type="text/javascript" charset="utf-8"></script>
  <script src="../../js/darkfish.js" type="text/javascript" charset="utf-8"></script>

</head>
<body id="top" class="module">

  <div id="metadata">
    <div id="home-metadata">
      <div id="home-section" class="section">
        <h3 class="section-header">
          <a href="../../index.html">Home</a>
          <a href="../../index.html#classes">Classes</a>
          <a href="../../index.html#methods">Methods</a>
        </h3>
      </div>
    </div>

    <div id="file-metadata">
      <div id="file-list-section" class="section">
        <h3 class="section-header">In Files</h3>
        <div class="section-body">
          <ul>
          
            <li><a href="../../lib/active_model/validations_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="lib/active_model/validations.rb">lib/active_model/validations.rb</a></li>
          
            <li><a href="../../lib/active_model/validations/with_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="lib/active_model/validations/with.rb">lib/active_model/validations/with.rb</a></li>
          
            <li><a href="../../lib/active_model/validations/validates_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="lib/active_model/validations/validates.rb">lib/active_model/validations/validates.rb</a></li>
          
          </ul>
        </div>
      </div>

      
    </div>

    <div id="class-metadata">
      

      

      

      
      <!-- Method Quickref -->
      <div id="method-list-section" class="section">
        <h3 class="section-header">Methods</h3>
        <ul class="link-list">
          
          <li><a href="#method-i-_validates_default_keys">#_validates_default_keys</a></li>
          
          <li><a href="#method-i-attribute_method-3F">#attribute_method?</a></li>
          
          <li><a href="#method-i-inherited">#inherited</a></li>
          
          <li><a href="#method-i-validate">#validate</a></li>
          
          <li><a href="#method-i-validates">#validates</a></li>
          
          <li><a href="#method-i-validates-21">#validates!</a></li>
          
          <li><a href="#method-i-validates_each">#validates_each</a></li>
          
          <li><a href="#method-i-validates_with">#validates_with</a></li>
          
          <li><a href="#method-i-validators">#validators</a></li>
          
          <li><a href="#method-i-validators_on">#validators_on</a></li>
          
        </ul>
      </div>
      

      
    </div>

    <div id="project-metadata">
      
      

      <div id="classindex-section" class="section project-section">
        <h3 class="section-header">Class/Module Index
          <span class="search-toggle"><img src="../../images/find.png"
            height="16" width="16" alt="[+]"
            title="show/hide quicksearch" /></span></h3>
        <form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
        <fieldset>
          <legend>Quicksearch</legend>
          <input type="text" name="quicksearch" value=""
            class="quicksearch-field" />
        </fieldset>
        </form>

        <ul class="link-list">
        
          <li><a href="../../ActiveModel.html">ActiveModel</a></li>
        
          <li><a href="../../ActiveModel/AttributeMethods.html">ActiveModel::AttributeMethods</a></li>
        
          <li><a href="../../ActiveModel/AttributeMethods/ClassMethods.html">ActiveModel::AttributeMethods::ClassMethods</a></li>
        
          <li><a href="../../ActiveModel/AttributeMethods/ClassMethods/AttributeMethodMatcher.html">ActiveModel::AttributeMethods::ClassMethods::AttributeMethodMatcher</a></li>
        
          <li><a href="../../ActiveModel/BlockValidator.html">ActiveModel::BlockValidator</a></li>
        
          <li><a href="../../ActiveModel/Callbacks.html">ActiveModel::Callbacks</a></li>
        
          <li><a href="../../ActiveModel/Conversion.html">ActiveModel::Conversion</a></li>
        
          <li><a href="../../ActiveModel/Dirty.html">ActiveModel::Dirty</a></li>
        
          <li><a href="../../ActiveModel/EachValidator.html">ActiveModel::EachValidator</a></li>
        
          <li><a href="../../ActiveModel/Errors.html">ActiveModel::Errors</a></li>
        
          <li><a href="../../ActiveModel/Lint.html">ActiveModel::Lint</a></li>
        
          <li><a href="../../ActiveModel/Lint/Tests.html">ActiveModel::Lint::Tests</a></li>
        
          <li><a href="../../ActiveModel/MassAssignmentSecurity.html">ActiveModel::MassAssignmentSecurity</a></li>
        
          <li><a href="../../ActiveModel/MassAssignmentSecurity/BlackList.html">ActiveModel::MassAssignmentSecurity::BlackList</a></li>
        
          <li><a href="../../ActiveModel/MassAssignmentSecurity/ClassMethods.html">ActiveModel::MassAssignmentSecurity::ClassMethods</a></li>
        
          <li><a href="../../ActiveModel/MassAssignmentSecurity/Error.html">ActiveModel::MassAssignmentSecurity::Error</a></li>
        
          <li><a href="../../ActiveModel/MassAssignmentSecurity/LoggerSanitizer.html">ActiveModel::MassAssignmentSecurity::LoggerSanitizer</a></li>
        
          <li><a href="../../ActiveModel/MassAssignmentSecurity/PermissionSet.html">ActiveModel::MassAssignmentSecurity::PermissionSet</a></li>
        
          <li><a href="../../ActiveModel/MassAssignmentSecurity/Sanitizer.html">ActiveModel::MassAssignmentSecurity::Sanitizer</a></li>
        
          <li><a href="../../ActiveModel/MassAssignmentSecurity/StrictSanitizer.html">ActiveModel::MassAssignmentSecurity::StrictSanitizer</a></li>
        
          <li><a href="../../ActiveModel/MassAssignmentSecurity/WhiteList.html">ActiveModel::MassAssignmentSecurity::WhiteList</a></li>
        
          <li><a href="../../ActiveModel/MissingAttributeError.html">ActiveModel::MissingAttributeError</a></li>
        
          <li><a href="../../ActiveModel/Name.html">ActiveModel::Name</a></li>
        
          <li><a href="../../ActiveModel/Naming.html">ActiveModel::Naming</a></li>
        
          <li><a href="../../ActiveModel/Observer.html">ActiveModel::Observer</a></li>
        
          <li><a href="../../ActiveModel/ObserverArray.html">ActiveModel::ObserverArray</a></li>
        
          <li><a href="../../ActiveModel/Observing.html">ActiveModel::Observing</a></li>
        
          <li><a href="../../ActiveModel/Observing/ClassMethods.html">ActiveModel::Observing::ClassMethods</a></li>
        
          <li><a href="../../ActiveModel/SecurePassword.html">ActiveModel::SecurePassword</a></li>
        
          <li><a href="../../ActiveModel/SecurePassword/ClassMethods.html">ActiveModel::SecurePassword::ClassMethods</a></li>
        
          <li><a href="../../ActiveModel/SecurePassword/InstanceMethodsOnActivation.html">ActiveModel::SecurePassword::InstanceMethodsOnActivation</a></li>
        
          <li><a href="../../ActiveModel/Serialization.html">ActiveModel::Serialization</a></li>
        
          <li><a href="../../ActiveModel/Serializers.html">ActiveModel::Serializers</a></li>
        
          <li><a href="../../ActiveModel/Serializers/JSON.html">ActiveModel::Serializers::JSON</a></li>
        
          <li><a href="../../ActiveModel/Serializers/Xml.html">ActiveModel::Serializers::Xml</a></li>
        
          <li><a href="../../ActiveModel/StrictValidationFailed.html">ActiveModel::StrictValidationFailed</a></li>
        
          <li><a href="../../ActiveModel/Translation.html">ActiveModel::Translation</a></li>
        
          <li><a href="../../ActiveModel/Validations.html">ActiveModel::Validations</a></li>
        
          <li><a href="../../ActiveModel/Validations/AcceptanceValidator.html">ActiveModel::Validations::AcceptanceValidator</a></li>
        
          <li><a href="../../ActiveModel/Validations/Callbacks.html">ActiveModel::Validations::Callbacks</a></li>
        
          <li><a href="../../ActiveModel/Validations/Callbacks/ClassMethods.html">ActiveModel::Validations::Callbacks::ClassMethods</a></li>
        
          <li><a href="../../ActiveModel/Validations/ClassMethods.html">ActiveModel::Validations::ClassMethods</a></li>
        
          <li><a href="../../ActiveModel/Validations/ConfirmationValidator.html">ActiveModel::Validations::ConfirmationValidator</a></li>
        
          <li><a href="../../ActiveModel/Validations/ExclusionValidator.html">ActiveModel::Validations::ExclusionValidator</a></li>
        
          <li><a href="../../ActiveModel/Validations/FormatValidator.html">ActiveModel::Validations::FormatValidator</a></li>
        
          <li><a href="../../ActiveModel/Validations/HelperMethods.html">ActiveModel::Validations::HelperMethods</a></li>
        
          <li><a href="../../ActiveModel/Validations/InclusionValidator.html">ActiveModel::Validations::InclusionValidator</a></li>
        
          <li><a href="../../ActiveModel/Validations/LengthValidator.html">ActiveModel::Validations::LengthValidator</a></li>
        
          <li><a href="../../ActiveModel/Validations/NumericalityValidator.html">ActiveModel::Validations::NumericalityValidator</a></li>
        
          <li><a href="../../ActiveModel/Validations/PresenceValidator.html">ActiveModel::Validations::PresenceValidator</a></li>
        
          <li><a href="../../ActiveModel/Validations/WithValidator.html">ActiveModel::Validations::WithValidator</a></li>
        
          <li><a href="../../ActiveModel/Validator.html">ActiveModel::Validator</a></li>
        
        </ul>
        <div id="no-class-search-results" style="display: none;">No matching classes.</div>
      </div>

      
    </div>
  </div>

  <div id="documentation">
    <h1 class="module">ActiveModel::Validations::ClassMethods</h1>

    <div id="description" class="description">
      
    </div><!-- description -->

    
    
    
    <div id="5Buntitled-5D" class="documentation-section">
      

      

      

      

      <!-- Methods -->
      
      <div id="public-instance-method-details" class="method-section section">
        <h3 class="section-header">Public Instance Methods</h3>

      
        <div id="attribute_method-3F-method" class="method-detail ">
          <a name="method-i-attribute_method-3F"></a>

          
          <div class="method-heading">
            <span class="method-name">attribute_method?</span><span
              class="method-args">(attribute)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Check if method is an attribute method or not.</p>
            

            
            <div class="method-source-code" id="attribute_method-3F-source">
<pre>
<span class="ruby-comment"># File lib/active_model/validations.rb, line 156</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">attribute_method?</span>(<span class="ruby-identifier">attribute</span>)
  <span class="ruby-identifier">method_defined?</span>(<span class="ruby-identifier">attribute</span>)
<span class="ruby-keyword">end</span></pre>
            </div><!-- attribute_method-3F-source -->
            
          </div>

          

          
        </div><!-- attribute_method-3F-method -->

      
        <div id="inherited-method" class="method-detail ">
          <a name="method-i-inherited"></a>

          
          <div class="method-heading">
            <span class="method-name">inherited</span><span
              class="method-args">(base)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Copy validators on inheritance.</p>
            

            
            <div class="method-source-code" id="inherited-source">
<pre>
<span class="ruby-comment"># File lib/active_model/validations.rb, line 161</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">inherited</span>(<span class="ruby-identifier">base</span>)
  <span class="ruby-identifier">dup</span> = <span class="ruby-identifier">_validators</span>.<span class="ruby-identifier">dup</span>
  <span class="ruby-identifier">base</span>.<span class="ruby-identifier">_validators</span> = <span class="ruby-identifier">dup</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>, <span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-identifier">dup</span>[<span class="ruby-identifier">k</span>] = <span class="ruby-identifier">v</span>.<span class="ruby-identifier">dup</span> }
  <span class="ruby-keyword">super</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- inherited-source -->
            
          </div>

          

          
        </div><!-- inherited-method -->

      
        <div id="validate-method" class="method-detail ">
          <a name="method-i-validate"></a>

          
          <div class="method-heading">
            <span class="method-name">validate</span><span
              class="method-args">(*args, &block)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Adds a validation method or block to the class. This is useful when
overriding the <tt>validate</tt> instance method becomes too unwieldy and
you’re looking for more descriptive declaration of your validations.</p>

<p>This can be done with a symbol pointing to a method:</p>

<pre>class Comment
  include ActiveModel::Validations

  validate :must_be_friends

  def must_be_friends
    errors.add(:base, &quot;Must be friends to leave a comment&quot;) unless commenter.friend_of?(commentee)
  end
end</pre>

<p>With a block which is passed with the current record to be validated:</p>

<pre>class Comment
  include ActiveModel::Validations

  validate do |comment|
    comment.must_be_friends
  end

  def must_be_friends
    errors.add(:base, &quot;Must be friends to leave a comment&quot;) unless commenter.friend_of?(commentee)
  end
end</pre>

<p>Or with a block where self points to the current record to be validated:</p>

<pre>class Comment
  include ActiveModel::Validations

  validate do
    errors.add(:base, &quot;Must be friends to leave a comment&quot;) unless commenter.friend_of?(commentee)
  end
end</pre>
            

            
            <div class="method-source-code" id="validate-source">
<pre>
<span class="ruby-comment"># File lib/active_model/validations.rb, line 131</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">validate</span>(*<span class="ruby-identifier">args</span>, &amp;<span class="ruby-identifier">block</span>)
  <span class="ruby-identifier">options</span> = <span class="ruby-identifier">args</span>.<span class="ruby-identifier">extract_options!</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-value">:on</span>)
    <span class="ruby-identifier">options</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">dup</span>
    <span class="ruby-identifier">options</span>[<span class="ruby-value">:if</span>] = <span class="ruby-constant">Array</span>.<span class="ruby-identifier">wrap</span>(<span class="ruby-identifier">options</span>[<span class="ruby-value">:if</span>])
    <span class="ruby-identifier">options</span>[<span class="ruby-value">:if</span>].<span class="ruby-identifier">unshift</span>(<span class="ruby-node">&quot;validation_context == :#{options[:on]}&quot;</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">args</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">options</span>
  <span class="ruby-identifier">set_callback</span>(<span class="ruby-value">:validate</span>, *<span class="ruby-identifier">args</span>, &amp;<span class="ruby-identifier">block</span>)
<span class="ruby-keyword">end</span></pre>
            </div><!-- validate-source -->
            
          </div>

          

          
        </div><!-- validate-method -->

      
        <div id="validates-method" class="method-detail ">
          <a name="method-i-validates"></a>

          
          <div class="method-heading">
            <span class="method-name">validates</span><span
              class="method-args">(*attributes)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>This method is a shortcut to all default validators and any custom
validator classes ending in ‘Validator’. Note that Rails default validators
can be overridden inside specific classes by creating custom validator
classes in their place such as <a
href="PresenceValidator.html">PresenceValidator</a>.</p>

<p>Examples of using the default rails validators:</p>

<pre>validates :terms, :acceptance =&gt; true
validates :password, :confirmation =&gt; true
validates :username, :exclusion =&gt; { :in =&gt; %w(admin superuser) }
validates :email, :format =&gt; { :with =&gt; /\A([^@\s]+)@((?:[-a-z0-9]+\.)+[a-z]{2,})\Z/i, :on =&gt; :create }
validates :age, :inclusion =&gt; { :in =&gt; 0..9 }
validates :first_name, :length =&gt; { :maximum =&gt; 30 }
validates :age, :numericality =&gt; true
validates :username, :presence =&gt; true
validates :username, :uniqueness =&gt; true</pre>

<p>The power of the <tt>validates</tt> method comes when using custom
validators and default validators in one call for a given attribute e.g.</p>

<pre>class EmailValidator &lt; ActiveModel::EachValidator
  def validate_each(record, attribute, value)
    record.errors.add attribute, (options[:message] || &quot;is not an email&quot;) unless
      value =~ /\A([^@\s]+)@((?:[-a-z0-9]+\.)+[a-z]{2,})\z/i
  end
end

class Person
  include ActiveModel::Validations
  attr_accessor :name, :email

  validates :name, :presence =&gt; true, :uniqueness =&gt; true, :length =&gt; { :maximum =&gt; 100 }
  validates :email, :presence =&gt; true, :email =&gt; true
end</pre>

<p><a href="../Validator.html">Validator</a> classes may also exist within the
class being validated allowing custom modules of validators to be included
as needed e.g.</p>

<pre>class Film
  include ActiveModel::Validations

  class TitleValidator &lt; ActiveModel::EachValidator
    def validate_each(record, attribute, value)
      record.errors.add attribute, &quot;must start with 'the'&quot; unless value =~ /\Athe/i
    end
  end

  validates :name, :title =&gt; true
end</pre>

<p>Additionally validator classes may be in another namespace and still used
within any class.</p>

<pre>validates :name, :'film/title' =&gt; true</pre>

<p>The validators hash can also handle regular expressions, ranges, arrays and
strings in shortcut form, e.g.</p>

<pre>validates :email, :format =&gt; /@/
validates :gender, :inclusion =&gt; %w(male female)
validates :password, :length =&gt; 6..20</pre>

<p>When using shortcut form, ranges and arrays are passed to your validator’s
initializer as +<a href="http://:in">options</a>+ while other types
including regular expressions and strings are passed as +<a
href="http://:with">options</a>+</p>

<p>Finally, the options <tt>:if</tt>, <tt>:unless</tt>, <tt>:on</tt>,
<tt>:allow_blank</tt>, <tt>:allow_nil</tt> and <tt>:strict</tt> can be
given to one specific validator, as a hash:</p>

<pre>validates :password, :presence =&gt; { :if =&gt; :password_required? }, :confirmation =&gt; true</pre>

<p>Or to all at the same time:</p>

<pre>validates :password, :presence =&gt; true, :confirmation =&gt; true, :if =&gt; :password_required?</pre>
            

            
            <div class="method-source-code" id="validates-source">
<pre>
<span class="ruby-comment"># File lib/active_model/validations/validates.rb, line 81</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">validates</span>(*<span class="ruby-identifier">attributes</span>)
  <span class="ruby-identifier">defaults</span> = <span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">extract_options!</span>
  <span class="ruby-identifier">validations</span> = <span class="ruby-identifier">defaults</span>.<span class="ruby-identifier">slice!</span>(*<span class="ruby-identifier">_validates_default_keys</span>)

  <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-string">&quot;You need to supply at least one attribute&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">empty?</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-string">&quot;You need to supply at least one validation&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">validations</span>.<span class="ruby-identifier">empty?</span>

  <span class="ruby-identifier">defaults</span>.<span class="ruby-identifier">merge!</span>(<span class="ruby-value">:attributes</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">attributes</span>)

  <span class="ruby-identifier">validations</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span>, <span class="ruby-identifier">options</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">key</span> = <span class="ruby-node">&quot;#{key.to_s.camelize}Validator&quot;</span>

    <span class="ruby-keyword">begin</span>
      <span class="ruby-identifier">validator</span> = <span class="ruby-identifier">key</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-string">'::'</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">key</span>.<span class="ruby-identifier">constantize</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">const_get</span>(<span class="ruby-identifier">key</span>)
    <span class="ruby-keyword">rescue</span> <span class="ruby-constant">NameError</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;Unknown validator: '#{key}'&quot;</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">validates_with</span>(<span class="ruby-identifier">validator</span>, <span class="ruby-identifier">defaults</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">_parse_validates_options</span>(<span class="ruby-identifier">options</span>)))
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- validates-source -->
            
          </div>

          

          
        </div><!-- validates-method -->

      
        <div id="validates-21-method" class="method-detail ">
          <a name="method-i-validates-21"></a>

          
          <div class="method-heading">
            <span class="method-name">validates!</span><span
              class="method-args">(*attributes)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>This method is used to define validation that cannot be corrected by end
user and is considered exceptional. So each validator defined with bang or
<tt>:strict</tt> option set to <tt>true</tt> will always raise
<tt>ActiveModel::StrictValidationFailed</tt> instead of adding error when
validation fails. See <tt>validates</tt> for more information about
validation itself.</p>
            

            
            <div class="method-source-code" id="validates-21-source">
<pre>
<span class="ruby-comment"># File lib/active_model/validations/validates.rb, line 109</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">validates!</span>(*<span class="ruby-identifier">attributes</span>)
  <span class="ruby-identifier">options</span> = <span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">extract_options!</span>
  <span class="ruby-identifier">options</span>[<span class="ruby-value">:strict</span>] = <span class="ruby-keyword">true</span>
  <span class="ruby-identifier">validates</span>(*(<span class="ruby-identifier">attributes</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">options</span>))
<span class="ruby-keyword">end</span></pre>
            </div><!-- validates-21-source -->
            
          </div>

          

          
        </div><!-- validates-21-method -->

      
        <div id="validates_each-method" class="method-detail ">
          <a name="method-i-validates_each"></a>

          
          <div class="method-heading">
            <span class="method-name">validates_each</span><span
              class="method-args">(*attr_names, &block)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Validates each attribute against a block.</p>

<pre>class Person
  include ActiveModel::Validations

  attr_accessor :first_name, :last_name

  validates_each :first_name, :last_name do |record, attr, value|
    record.errors.add attr, 'starts with z.' if value.to_s[0] == ?z
  end
end</pre>

<p>Options:</p>
<ul><li>
<p><tt>:on</tt> - Specifies the context where this validation is active (e.g.
<tt>:on =&gt; :create</tt> or <tt>:on =&gt;
:custom_validation_context</tt>)</p>
</li><li>
<p><tt>:allow_nil</tt> - Skip validation if attribute is <tt>nil</tt>.</p>
</li><li>
<p><tt>:allow_blank</tt> - Skip validation if attribute is blank.</p>
</li><li>
<p><tt>:if</tt> - Specifies a method, proc or string to call to determine if
the validation should occur (e.g. <tt>:if =&gt; :allow_validation</tt>, or
<tt>:if =&gt; Proc.new { |user| user.signup_step &gt; 2 }</tt>). The
method, proc or string should return or evaluate to a true or false value.</p>
</li><li>
<p><tt>:unless</tt> - Specifies a method, proc or string to call to determine
if the validation should not occur (e.g. <tt>:unless =&gt;
:skip_validation</tt>, or <tt>:unless =&gt; Proc.new { |user|
user.signup_step &lt;= 2 }</tt>). The method, proc or string should return
or evaluate to a true or false value.</p>
</li></ul>
            

            
            <div class="method-source-code" id="validates_each-source">
<pre>
<span class="ruby-comment"># File lib/active_model/validations.rb, line 86</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">validates_each</span>(*<span class="ruby-identifier">attr_names</span>, &amp;<span class="ruby-identifier">block</span>)
  <span class="ruby-identifier">options</span> = <span class="ruby-identifier">attr_names</span>.<span class="ruby-identifier">extract_options!</span>.<span class="ruby-identifier">symbolize_keys</span>
  <span class="ruby-identifier">validates_with</span> <span class="ruby-constant">BlockValidator</span>, <span class="ruby-identifier">options</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-value">:attributes</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">attr_names</span>.<span class="ruby-identifier">flatten</span>), &amp;<span class="ruby-identifier">block</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- validates_each-source -->
            
          </div>

          

          
        </div><!-- validates_each-method -->

      
        <div id="validates_with-method" class="method-detail ">
          <a name="method-i-validates_with"></a>

          
          <div class="method-heading">
            <span class="method-name">validates_with</span><span
              class="method-args">(*args, &block)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>If you pass any additional configuration options, they will be passed to
the class and available as <tt>options</tt>:</p>

<pre>class Person
  include ActiveModel::Validations
  validates_with MyValidator, :my_custom_key =&gt; &quot;my custom value&quot;
end

class MyValidator &lt; ActiveModel::Validator
  def validate(record)
    options[:my_custom_key] # =&gt; &quot;my custom value&quot;
  end
end</pre>
            

            
            <div class="method-source-code" id="validates_with-source">
<pre>
<span class="ruby-comment"># File lib/active_model/validations/with.rb, line 79</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">validates_with</span>(*<span class="ruby-identifier">args</span>, &amp;<span class="ruby-identifier">block</span>)
  <span class="ruby-identifier">options</span> = <span class="ruby-identifier">args</span>.<span class="ruby-identifier">extract_options!</span>
  <span class="ruby-identifier">args</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">klass</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">validator</span> = <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">options</span>, &amp;<span class="ruby-identifier">block</span>)
    <span class="ruby-identifier">validator</span>.<span class="ruby-identifier">setup</span>(<span class="ruby-keyword">self</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">validator</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:setup</span>)

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">validator</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:attributes</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">validator</span>.<span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">empty?</span>
      <span class="ruby-identifier">validator</span>.<span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">attribute</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">_validators</span>[<span class="ruby-identifier">attribute</span>.<span class="ruby-identifier">to_sym</span>] <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">validator</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">_validators</span>[<span class="ruby-keyword">nil</span>] <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">validator</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">validate</span>(<span class="ruby-identifier">validator</span>, <span class="ruby-identifier">options</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- validates_with-source -->
            
          </div>

          

          
        </div><!-- validates_with-method -->

      
        <div id="validators-method" class="method-detail ">
          <a name="method-i-validators"></a>

          
          <div class="method-heading">
            <span class="method-name">validators</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>List all validators that are being used to validate the model using
<tt>validates_with</tt> method.</p>
            

            
            <div class="method-source-code" id="validators-source">
<pre>
<span class="ruby-comment"># File lib/active_model/validations.rb, line 144</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">validators</span>
  <span class="ruby-identifier">_validators</span>.<span class="ruby-identifier">values</span>.<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">uniq</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- validators-source -->
            
          </div>

          

          
        </div><!-- validators-method -->

      
        <div id="validators_on-method" class="method-detail ">
          <a name="method-i-validators_on"></a>

          
          <div class="method-heading">
            <span class="method-name">validators_on</span><span
              class="method-args">(*attributes)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>List all validators that being used to validate a specific attribute.</p>
            

            
            <div class="method-source-code" id="validators_on-source">
<pre>
<span class="ruby-comment"># File lib/active_model/validations.rb, line 149</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">validators_on</span>(*<span class="ruby-identifier">attributes</span>)
  <span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">attribute</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">_validators</span>[<span class="ruby-identifier">attribute</span>.<span class="ruby-identifier">to_sym</span>]
  <span class="ruby-keyword">end</span>.<span class="ruby-identifier">flatten</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- validators_on-source -->
            
          </div>

          

          
        </div><!-- validators_on-method -->

      
      </div><!-- public-instance-method-details -->
    
      <div id="protected-instance-method-details" class="method-section section">
        <h3 class="section-header">Protected Instance Methods</h3>

      
        <div id="_validates_default_keys-method" class="method-detail ">
          <a name="method-i-_validates_default_keys"></a>

          
          <div class="method-heading">
            <span class="method-name">_validates_default_keys</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>When creating custom validators, it might be useful to be able to specify
additional default keys. This can be done by overwriting this method.</p>
            

            
            <div class="method-source-code" id="_validates_default_keys-source">
<pre>
<span class="ruby-comment"># File lib/active_model/validations/validates.rb, line 119</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">_validates_default_keys</span>
  [<span class="ruby-value">:if</span>, <span class="ruby-value">:unless</span>, <span class="ruby-value">:on</span>, <span class="ruby-value">:allow_blank</span>, <span class="ruby-value">:allow_nil</span> , <span class="ruby-value">:strict</span>]
<span class="ruby-keyword">end</span></pre>
            </div><!-- _validates_default_keys-source -->
            
          </div>

          

          
        </div><!-- _validates_default_keys-method -->

      
      </div><!-- protected-instance-method-details -->
    
    </div><!-- 5Buntitled-5D -->
  

  </div><!-- documentation -->

  <div id="validator-badges">
    <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
    <p><small>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish
      Rdoc Generator</a> 2</small>.</p>
  </div>

</body>
</html>

