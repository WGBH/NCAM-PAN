<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />

  <title>Class: ActiveRecord::ConnectionAdapters::ConnectionPool</title>

  <link rel="stylesheet" href="../../rdoc.css" type="text/css" media="screen" />

  <script src="../../js/jquery.js" type="text/javascript" charset="utf-8"></script>
  <script src="../../js/thickbox-compressed.js" type="text/javascript" charset="utf-8"></script>
  <script src="../../js/quicksearch.js" type="text/javascript" charset="utf-8"></script>
  <script src="../../js/darkfish.js" type="text/javascript" charset="utf-8"></script>

</head>
<body id="top" class="class">

  <div id="metadata">
    <div id="home-metadata">
      <div id="home-section" class="section">
        <h3 class="section-header">
          <a href="../../index.html">Home</a>
          <a href="../../index.html#classes">Classes</a>
          <a href="../../index.html#methods">Methods</a>
        </h3>
      </div>
    </div>

    <div id="file-metadata">
      <div id="file-list-section" class="section">
        <h3 class="section-header">In Files</h3>
        <div class="section-body">
          <ul>
          
            <li><a href="../../lib/active_record/connection_adapters/abstract/connection_pool_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="lib/active_record/connection_adapters/abstract/connection_pool.rb">lib/active_record/connection_adapters/abstract/connection_pool.rb</a></li>
          
          </ul>
        </div>
      </div>

      
    </div>

    <div id="class-metadata">
      
      <!-- Parent Class -->
      <div id="parent-class-section" class="section">
        <h3 class="section-header">Parent</h3>
        
        <p class="link">Object</p>
        
      </div>
      

      

      

      
      <!-- Method Quickref -->
      <div id="method-list-section" class="section">
        <h3 class="section-header">Methods</h3>
        <ul class="link-list">
          
          <li><a href="#method-c-new">::new</a></li>
          
          <li><a href="#method-i-active_connection-3F">#active_connection?</a></li>
          
          <li><a href="#method-i-checkin">#checkin</a></li>
          
          <li><a href="#method-i-checkout">#checkout</a></li>
          
          <li><a href="#method-i-clear_cache-21">#clear_cache!</a></li>
          
          <li><a href="#method-i-clear_reloadable_connections-21">#clear_reloadable_connections!</a></li>
          
          <li><a href="#method-i-clear_stale_cached_connections-21">#clear_stale_cached_connections!</a></li>
          
          <li><a href="#method-i-columns">#columns</a></li>
          
          <li><a href="#method-i-columns_hash">#columns_hash</a></li>
          
          <li><a href="#method-i-connected-3F">#connected?</a></li>
          
          <li><a href="#method-i-connection">#connection</a></li>
          
          <li><a href="#method-i-disconnect-21">#disconnect!</a></li>
          
          <li><a href="#method-i-primary_keys">#primary_keys</a></li>
          
          <li><a href="#method-i-release_connection">#release_connection</a></li>
          
          <li><a href="#method-i-with_connection">#with_connection</a></li>
          
        </ul>
      </div>
      

      
      <!-- Included Modules -->
      <div id="includes-section" class="section">
        <h3 class="section-header">Included Modules</h3>
        <ul class="link-list">
        
        
          <li><span class="include">MonitorMixin</span></li>
        
        
        </ul>
      </div>
      
    </div>

    <div id="project-metadata">
      
      
      <div id="fileindex-section" class="section project-section">
        <h3 class="section-header">Files</h3>
        <ul>
        
          <li class="file"><a href="../../README_rdoc.html">README.rdoc</a></li>
        
        </ul>
      </div>
      

      <div id="classindex-section" class="section project-section">
        <h3 class="section-header">Class/Module Index
          <span class="search-toggle"><img src="../../images/find.png"
            height="16" width="16" alt="[+]"
            title="show/hide quicksearch" /></span></h3>
        <form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
        <fieldset>
          <legend>Quicksearch</legend>
          <input type="text" name="quicksearch" value=""
            class="quicksearch-field" />
        </fieldset>
        </form>

        <ul class="link-list">
        
          <li><a href="../../ActiveRecord.html">ActiveRecord</a></li>
        
          <li><a href="../../ActiveRecord/ActiveRecordError.html">ActiveRecord::ActiveRecordError</a></li>
        
          <li><a href="../../ActiveRecord/AdapterNotFound.html">ActiveRecord::AdapterNotFound</a></li>
        
          <li><a href="../../ActiveRecord/AdapterNotSpecified.html">ActiveRecord::AdapterNotSpecified</a></li>
        
          <li><a href="../../ActiveRecord/Aggregations.html">ActiveRecord::Aggregations</a></li>
        
          <li><a href="../../ActiveRecord/Aggregations/ClassMethods.html">ActiveRecord::Aggregations::ClassMethods</a></li>
        
          <li><a href="../../ActiveRecord/AssociationTypeMismatch.html">ActiveRecord::AssociationTypeMismatch</a></li>
        
          <li><a href="../../ActiveRecord/Associations.html">ActiveRecord::Associations</a></li>
        
          <li><a href="../../ActiveRecord/Associations/ClassMethods.html">ActiveRecord::Associations::ClassMethods</a></li>
        
          <li><a href="../../ActiveRecord/AttributeAssignment.html">ActiveRecord::AttributeAssignment</a></li>
        
          <li><a href="../../ActiveRecord/AttributeAssignment/ClassMethods.html">ActiveRecord::AttributeAssignment::ClassMethods</a></li>
        
          <li><a href="../../ActiveRecord/AttributeAssignmentError.html">ActiveRecord::AttributeAssignmentError</a></li>
        
          <li><a href="../../ActiveRecord/AttributeMethods.html">ActiveRecord::AttributeMethods</a></li>
        
          <li><a href="../../ActiveRecord/AttributeMethods/BeforeTypeCast.html">ActiveRecord::AttributeMethods::BeforeTypeCast</a></li>
        
          <li><a href="../../ActiveRecord/AttributeMethods/ClassMethods.html">ActiveRecord::AttributeMethods::ClassMethods</a></li>
        
          <li><a href="../../ActiveRecord/AttributeMethods/DeprecatedUnderscoreRead.html">ActiveRecord::AttributeMethods::DeprecatedUnderscoreRead</a></li>
        
          <li><a href="../../ActiveRecord/AttributeMethods/DeprecatedUnderscoreRead/ClassMethods.html">ActiveRecord::AttributeMethods::DeprecatedUnderscoreRead::ClassMethods</a></li>
        
          <li><a href="../../ActiveRecord/AttributeMethods/Dirty.html">ActiveRecord::AttributeMethods::Dirty</a></li>
        
          <li><a href="../../ActiveRecord/AttributeMethods/PrimaryKey.html">ActiveRecord::AttributeMethods::PrimaryKey</a></li>
        
          <li><a href="../../ActiveRecord/AttributeMethods/PrimaryKey/ClassMethods.html">ActiveRecord::AttributeMethods::PrimaryKey::ClassMethods</a></li>
        
          <li><a href="../../ActiveRecord/AttributeMethods/Query.html">ActiveRecord::AttributeMethods::Query</a></li>
        
          <li><a href="../../ActiveRecord/AttributeMethods/Read.html">ActiveRecord::AttributeMethods::Read</a></li>
        
          <li><a href="../../ActiveRecord/AttributeMethods/Read/ClassMethods.html">ActiveRecord::AttributeMethods::Read::ClassMethods</a></li>
        
          <li><a href="../../ActiveRecord/AttributeMethods/Serialization.html">ActiveRecord::AttributeMethods::Serialization</a></li>
        
          <li><a href="../../ActiveRecord/AttributeMethods/Serialization/Attribute.html">ActiveRecord::AttributeMethods::Serialization::Attribute</a></li>
        
          <li><a href="../../ActiveRecord/AttributeMethods/Serialization/ClassMethods.html">ActiveRecord::AttributeMethods::Serialization::ClassMethods</a></li>
        
          <li><a href="../../ActiveRecord/AttributeMethods/TimeZoneConversion.html">ActiveRecord::AttributeMethods::TimeZoneConversion</a></li>
        
          <li><a href="../../ActiveRecord/AttributeMethods/TimeZoneConversion/ClassMethods.html">ActiveRecord::AttributeMethods::TimeZoneConversion::ClassMethods</a></li>
        
          <li><a href="../../ActiveRecord/AttributeMethods/Write.html">ActiveRecord::AttributeMethods::Write</a></li>
        
          <li><a href="../../ActiveRecord/AttributeMethods/Write/ClassMethods.html">ActiveRecord::AttributeMethods::Write::ClassMethods</a></li>
        
          <li><a href="../../ActiveRecord/AutosaveAssociation.html">ActiveRecord::AutosaveAssociation</a></li>
        
          <li><a href="../../ActiveRecord/AutosaveAssociation/ClassMethods.html">ActiveRecord::AutosaveAssociation::ClassMethods</a></li>
        
          <li><a href="../../ActiveRecord/Base.html">ActiveRecord::Base</a></li>
        
          <li><a href="../../ActiveRecord/Batches.html">ActiveRecord::Batches</a></li>
        
          <li><a href="../../ActiveRecord/Calculations.html">ActiveRecord::Calculations</a></li>
        
          <li><a href="../../ActiveRecord/Callbacks.html">ActiveRecord::Callbacks</a></li>
        
          <li><a href="../../ActiveRecord/Coders.html">ActiveRecord::Coders</a></li>
        
          <li><a href="../../ActiveRecord/ConfigurationError.html">ActiveRecord::ConfigurationError</a></li>
        
          <li><a href="../../ActiveRecord/ConnectionAdapters.html">ActiveRecord::ConnectionAdapters</a></li>
        
          <li><a href="../../ActiveRecord/ConnectionAdapters/AbstractAdapter.html">ActiveRecord::ConnectionAdapters::AbstractAdapter</a></li>
        
          <li><a href="../../ActiveRecord/ConnectionAdapters/AbstractMysqlAdapter.html">ActiveRecord::ConnectionAdapters::AbstractMysqlAdapter</a></li>
        
          <li><a href="../../ActiveRecord/ConnectionAdapters/ConnectionHandler.html">ActiveRecord::ConnectionAdapters::ConnectionHandler</a></li>
        
          <li><a href="../../ActiveRecord/ConnectionAdapters/ConnectionManagement.html">ActiveRecord::ConnectionAdapters::ConnectionManagement</a></li>
        
          <li><a href="../../ActiveRecord/ConnectionAdapters/ConnectionPool.html">ActiveRecord::ConnectionAdapters::ConnectionPool</a></li>
        
          <li><a href="../../ActiveRecord/ConnectionAdapters/DatabaseLimits.html">ActiveRecord::ConnectionAdapters::DatabaseLimits</a></li>
        
          <li><a href="../../ActiveRecord/ConnectionAdapters/DatabaseStatements.html">ActiveRecord::ConnectionAdapters::DatabaseStatements</a></li>
        
          <li><a href="../../ActiveRecord/ConnectionAdapters/Mysql2Adapter.html">ActiveRecord::ConnectionAdapters::Mysql2Adapter</a></li>
        
          <li><a href="../../ActiveRecord/ConnectionAdapters/MysqlAdapter.html">ActiveRecord::ConnectionAdapters::MysqlAdapter</a></li>
        
          <li><a href="../../ActiveRecord/ConnectionAdapters/MysqlAdapter/StatementPool.html">ActiveRecord::ConnectionAdapters::MysqlAdapter::StatementPool</a></li>
        
          <li><a href="../../ActiveRecord/ConnectionAdapters/PostgreSQLAdapter.html">ActiveRecord::ConnectionAdapters::PostgreSQLAdapter</a></li>
        
          <li><a href="../../ActiveRecord/ConnectionAdapters/PostgreSQLAdapter/StatementPool.html">ActiveRecord::ConnectionAdapters::PostgreSQLAdapter::StatementPool</a></li>
        
          <li><a href="../../ActiveRecord/ConnectionAdapters/PostgreSQLAdapter/TableDefinition.html">ActiveRecord::ConnectionAdapters::PostgreSQLAdapter::TableDefinition</a></li>
        
          <li><a href="../../ActiveRecord/ConnectionAdapters/PostgreSQLAdapter/Utils.html">ActiveRecord::ConnectionAdapters::PostgreSQLAdapter::Utils</a></li>
        
          <li><a href="../../ActiveRecord/ConnectionAdapters/PostgreSQLColumn.html">ActiveRecord::ConnectionAdapters::PostgreSQLColumn</a></li>
        
          <li><a href="../../ActiveRecord/ConnectionAdapters/QueryCache.html">ActiveRecord::ConnectionAdapters::QueryCache</a></li>
        
          <li><a href="../../ActiveRecord/ConnectionAdapters/Quoting.html">ActiveRecord::ConnectionAdapters::Quoting</a></li>
        
          <li><a href="../../ActiveRecord/ConnectionAdapters/SQLiteAdapter.html">ActiveRecord::ConnectionAdapters::SQLiteAdapter</a></li>
        
          <li><a href="../../ActiveRecord/ConnectionAdapters/SQLiteAdapter/ExplainPrettyPrinter.html">ActiveRecord::ConnectionAdapters::SQLiteAdapter::ExplainPrettyPrinter</a></li>
        
          <li><a href="../../ActiveRecord/ConnectionAdapters/SQLiteAdapter/StatementPool.html">ActiveRecord::ConnectionAdapters::SQLiteAdapter::StatementPool</a></li>
        
          <li><a href="../../ActiveRecord/ConnectionAdapters/SQLiteAdapter/Version.html">ActiveRecord::ConnectionAdapters::SQLiteAdapter::Version</a></li>
        
          <li><a href="../../ActiveRecord/ConnectionAdapters/SchemaCache.html">ActiveRecord::ConnectionAdapters::SchemaCache</a></li>
        
          <li><a href="../../ActiveRecord/ConnectionAdapters/SchemaStatements.html">ActiveRecord::ConnectionAdapters::SchemaStatements</a></li>
        
          <li><a href="../../ActiveRecord/ConnectionAdapters/StatementPool.html">ActiveRecord::ConnectionAdapters::StatementPool</a></li>
        
          <li><a href="../../ActiveRecord/ConnectionAdapters/Table.html">ActiveRecord::ConnectionAdapters::Table</a></li>
        
          <li><a href="../../ActiveRecord/ConnectionAdapters/TableDefinition.html">ActiveRecord::ConnectionAdapters::TableDefinition</a></li>
        
          <li><a href="../../ActiveRecord/ConnectionNotEstablished.html">ActiveRecord::ConnectionNotEstablished</a></li>
        
          <li><a href="../../ActiveRecord/ConnectionTimeoutError.html">ActiveRecord::ConnectionTimeoutError</a></li>
        
          <li><a href="../../ActiveRecord/CounterCache.html">ActiveRecord::CounterCache</a></li>
        
          <li><a href="../../ActiveRecord/DangerousAttributeError.html">ActiveRecord::DangerousAttributeError</a></li>
        
          <li><a href="../../ActiveRecord/Delegation.html">ActiveRecord::Delegation</a></li>
        
          <li><a href="../../ActiveRecord/DynamicFinderMatch.html">ActiveRecord::DynamicFinderMatch</a></li>
        
          <li><a href="../../ActiveRecord/DynamicMatchers.html">ActiveRecord::DynamicMatchers</a></li>
        
          <li><a href="../../ActiveRecord/DynamicScopeMatch.html">ActiveRecord::DynamicScopeMatch</a></li>
        
          <li><a href="../../ActiveRecord/Explain.html">ActiveRecord::Explain</a></li>
        
          <li><a href="../../ActiveRecord/FinderMethods.html">ActiveRecord::FinderMethods</a></li>
        
          <li><a href="../../ActiveRecord/Fixtures.html">ActiveRecord::Fixtures</a></li>
        
          <li><a href="../../ActiveRecord/Fixtures/File.html">ActiveRecord::Fixtures::File</a></li>
        
          <li><a href="../../ActiveRecord/Generators.html">ActiveRecord::Generators</a></li>
        
          <li><a href="../../ActiveRecord/Generators/Migration.html">ActiveRecord::Generators::Migration</a></li>
        
          <li><a href="../../ActiveRecord/Generators/MigrationGenerator.html">ActiveRecord::Generators::MigrationGenerator</a></li>
        
          <li><a href="../../ActiveRecord/Generators/ModelGenerator.html">ActiveRecord::Generators::ModelGenerator</a></li>
        
          <li><a href="../../ActiveRecord/Generators/ObserverGenerator.html">ActiveRecord::Generators::ObserverGenerator</a></li>
        
          <li><a href="../../ActiveRecord/Generators/SessionMigrationGenerator.html">ActiveRecord::Generators::SessionMigrationGenerator</a></li>
        
          <li><a href="../../ActiveRecord/IdentityMap.html">ActiveRecord::IdentityMap</a></li>
        
          <li><a href="../../ActiveRecord/IdentityMap/Middleware.html">ActiveRecord::IdentityMap::Middleware</a></li>
        
          <li><a href="../../ActiveRecord/Inheritance.html">ActiveRecord::Inheritance</a></li>
        
          <li><a href="../../ActiveRecord/Inheritance/ClassMethods.html">ActiveRecord::Inheritance::ClassMethods</a></li>
        
          <li><a href="../../ActiveRecord/Integration.html">ActiveRecord::Integration</a></li>
        
          <li><a href="../../ActiveRecord/InvalidForeignKey.html">ActiveRecord::InvalidForeignKey</a></li>
        
          <li><a href="../../ActiveRecord/IrreversibleMigration.html">ActiveRecord::IrreversibleMigration</a></li>
        
          <li><a href="../../ActiveRecord/Locking.html">ActiveRecord::Locking</a></li>
        
          <li><a href="../../ActiveRecord/Locking/Optimistic.html">ActiveRecord::Locking::Optimistic</a></li>
        
          <li><a href="../../ActiveRecord/Locking/Optimistic/ClassMethods.html">ActiveRecord::Locking::Optimistic::ClassMethods</a></li>
        
          <li><a href="../../ActiveRecord/Locking/Pessimistic.html">ActiveRecord::Locking::Pessimistic</a></li>
        
          <li><a href="../../ActiveRecord/LogSubscriber.html">ActiveRecord::LogSubscriber</a></li>
        
          <li><a href="../../ActiveRecord/Migration.html">ActiveRecord::Migration</a></li>
        
          <li><a href="../../ActiveRecord/Migration/CommandRecorder.html">ActiveRecord::Migration::CommandRecorder</a></li>
        
          <li><a href="../../ActiveRecord/MigrationProxy.html">ActiveRecord::MigrationProxy</a></li>
        
          <li><a href="../../ActiveRecord/ModelSchema.html">ActiveRecord::ModelSchema</a></li>
        
          <li><a href="../../ActiveRecord/ModelSchema/ClassMethods.html">ActiveRecord::ModelSchema::ClassMethods</a></li>
        
          <li><a href="../../ActiveRecord/MultiparameterAssignmentErrors.html">ActiveRecord::MultiparameterAssignmentErrors</a></li>
        
          <li><a href="../../ActiveRecord/NestedAttributes.html">ActiveRecord::NestedAttributes</a></li>
        
          <li><a href="../../ActiveRecord/NestedAttributes/ClassMethods.html">ActiveRecord::NestedAttributes::ClassMethods</a></li>
        
          <li><a href="../../ActiveRecord/NestedAttributes/TooManyRecords.html">ActiveRecord::NestedAttributes::TooManyRecords</a></li>
        
          <li><a href="../../ActiveRecord/Observer.html">ActiveRecord::Observer</a></li>
        
          <li><a href="../../ActiveRecord/Persistence.html">ActiveRecord::Persistence</a></li>
        
          <li><a href="../../ActiveRecord/Persistence/ClassMethods.html">ActiveRecord::Persistence::ClassMethods</a></li>
        
          <li><a href="../../ActiveRecord/PreparedStatementInvalid.html">ActiveRecord::PreparedStatementInvalid</a></li>
        
          <li><a href="../../ActiveRecord/QueryCache.html">ActiveRecord::QueryCache</a></li>
        
          <li><a href="../../ActiveRecord/QueryCache/ClassMethods.html">ActiveRecord::QueryCache::ClassMethods</a></li>
        
          <li><a href="../../ActiveRecord/QueryMethods.html">ActiveRecord::QueryMethods</a></li>
        
          <li><a href="../../ActiveRecord/Querying.html">ActiveRecord::Querying</a></li>
        
          <li><a href="../../ActiveRecord/Railtie.html">ActiveRecord::Railtie</a></li>
        
          <li><a href="../../ActiveRecord/Railties.html">ActiveRecord::Railties</a></li>
        
          <li><a href="../../ActiveRecord/Railties/ControllerRuntime.html">ActiveRecord::Railties::ControllerRuntime</a></li>
        
          <li><a href="../../ActiveRecord/Railties/ControllerRuntime/ClassMethods.html">ActiveRecord::Railties::ControllerRuntime::ClassMethods</a></li>
        
          <li><a href="../../ActiveRecord/ReadOnlyRecord.html">ActiveRecord::ReadOnlyRecord</a></li>
        
          <li><a href="../../ActiveRecord/ReadonlyAttributes.html">ActiveRecord::ReadonlyAttributes</a></li>
        
          <li><a href="../../ActiveRecord/ReadonlyAttributes/ClassMethods.html">ActiveRecord::ReadonlyAttributes::ClassMethods</a></li>
        
          <li><a href="../../ActiveRecord/RecordInvalid.html">ActiveRecord::RecordInvalid</a></li>
        
          <li><a href="../../ActiveRecord/RecordNotFound.html">ActiveRecord::RecordNotFound</a></li>
        
          <li><a href="../../ActiveRecord/RecordNotSaved.html">ActiveRecord::RecordNotSaved</a></li>
        
          <li><a href="../../ActiveRecord/RecordNotUnique.html">ActiveRecord::RecordNotUnique</a></li>
        
          <li><a href="../../ActiveRecord/Reflection.html">ActiveRecord::Reflection</a></li>
        
          <li><a href="../../ActiveRecord/Reflection/ClassMethods.html">ActiveRecord::Reflection::ClassMethods</a></li>
        
          <li><a href="../../ActiveRecord/Reflection/MacroReflection.html">ActiveRecord::Reflection::MacroReflection</a></li>
        
          <li><a href="../../ActiveRecord/Relation.html">ActiveRecord::Relation</a></li>
        
          <li><a href="../../ActiveRecord/Result.html">ActiveRecord::Result</a></li>
        
          <li><a href="../../ActiveRecord/Rollback.html">ActiveRecord::Rollback</a></li>
        
          <li><a href="../../ActiveRecord/Sanitization.html">ActiveRecord::Sanitization</a></li>
        
          <li><a href="../../ActiveRecord/Sanitization/ClassMethods.html">ActiveRecord::Sanitization::ClassMethods</a></li>
        
          <li><a href="../../ActiveRecord/Schema.html">ActiveRecord::Schema</a></li>
        
          <li><a href="../../ActiveRecord/Scoping.html">ActiveRecord::Scoping</a></li>
        
          <li><a href="../../ActiveRecord/Scoping/ClassMethods.html">ActiveRecord::Scoping::ClassMethods</a></li>
        
          <li><a href="../../ActiveRecord/Scoping/Default.html">ActiveRecord::Scoping::Default</a></li>
        
          <li><a href="../../ActiveRecord/Scoping/Default/ClassMethods.html">ActiveRecord::Scoping::Default::ClassMethods</a></li>
        
          <li><a href="../../ActiveRecord/Scoping/Named.html">ActiveRecord::Scoping::Named</a></li>
        
          <li><a href="../../ActiveRecord/Scoping/Named/ClassMethods.html">ActiveRecord::Scoping::Named::ClassMethods</a></li>
        
          <li><a href="../../ActiveRecord/Serialization.html">ActiveRecord::Serialization</a></li>
        
          <li><a href="../../ActiveRecord/SerializationTypeMismatch.html">ActiveRecord::SerializationTypeMismatch</a></li>
        
          <li><a href="../../ActiveRecord/SessionStore.html">ActiveRecord::SessionStore</a></li>
        
          <li><a href="../../ActiveRecord/SessionStore/Session.html">ActiveRecord::SessionStore::Session</a></li>
        
          <li><a href="../../ActiveRecord/SessionStore/SqlBypass.html">ActiveRecord::SessionStore::SqlBypass</a></li>
        
          <li><a href="../../ActiveRecord/SpawnMethods.html">ActiveRecord::SpawnMethods</a></li>
        
          <li><a href="../../ActiveRecord/StaleObjectError.html">ActiveRecord::StaleObjectError</a></li>
        
          <li><a href="../../ActiveRecord/StatementInvalid.html">ActiveRecord::StatementInvalid</a></li>
        
          <li><a href="../../ActiveRecord/Store.html">ActiveRecord::Store</a></li>
        
          <li><a href="../../ActiveRecord/Store/ClassMethods.html">ActiveRecord::Store::ClassMethods</a></li>
        
          <li><a href="../../ActiveRecord/TestFixtures.html">ActiveRecord::TestFixtures</a></li>
        
          <li><a href="../../ActiveRecord/TestFixtures/ClassMethods.html">ActiveRecord::TestFixtures::ClassMethods</a></li>
        
          <li><a href="../../ActiveRecord/ThrowResult.html">ActiveRecord::ThrowResult</a></li>
        
          <li><a href="../../ActiveRecord/Timestamp.html">ActiveRecord::Timestamp</a></li>
        
          <li><a href="../../ActiveRecord/Transactions.html">ActiveRecord::Transactions</a></li>
        
          <li><a href="../../ActiveRecord/Transactions/ClassMethods.html">ActiveRecord::Transactions::ClassMethods</a></li>
        
          <li><a href="../../ActiveRecord/Translation.html">ActiveRecord::Translation</a></li>
        
          <li><a href="../../ActiveRecord/UnknownAttributeError.html">ActiveRecord::UnknownAttributeError</a></li>
        
          <li><a href="../../ActiveRecord/UnknownPrimaryKey.html">ActiveRecord::UnknownPrimaryKey</a></li>
        
          <li><a href="../../ActiveRecord/Validations.html">ActiveRecord::Validations</a></li>
        
          <li><a href="../../ActiveRecord/Validations/AssociatedValidator.html">ActiveRecord::Validations::AssociatedValidator</a></li>
        
          <li><a href="../../ActiveRecord/Validations/ClassMethods.html">ActiveRecord::Validations::ClassMethods</a></li>
        
          <li><a href="../../ActiveRecord/Validations/UniquenessValidator.html">ActiveRecord::Validations::UniquenessValidator</a></li>
        
          <li><a href="../../ActiveRecord/WrappedDatabaseException.html">ActiveRecord::WrappedDatabaseException</a></li>
        
          <li><a href="../../Mysql.html">Mysql</a></li>
        
          <li><a href="../../Mysql/Result.html">Mysql::Result</a></li>
        
          <li><a href="../../Mysql/Stmt.html">Mysql::Stmt</a></li>
        
          <li><a href="../../Mysql/Time.html">Mysql::Time</a></li>
        
          <li><a href="../../ArJdbcMySQL.html">ArJdbcMySQL</a></li>
        
          <li><a href="../../ArJdbcMySQL/Error.html">ArJdbcMySQL::Error</a></li>
        
        </ul>
        <div id="no-class-search-results" style="display: none;">No matching classes.</div>
      </div>

      
    </div>
  </div>

  <div id="documentation">
    <h1 class="class">ActiveRecord::ConnectionAdapters::ConnectionPool</h1>

    <div id="description" class="description">
      
<p>Connection pool base class for managing Active Record database connections.</p>

<h2>Introduction</h2>

<p>A connection pool synchronizes thread access to a limited number of
database connections. The basic idea is that each thread checks out a
database connection from the pool, uses that connection, and checks the
connection back in. <a href="ConnectionPool.html">ConnectionPool</a> is
completely thread-safe, and will ensure that a connection cannot be used by
two threads at the same time, as long as ConnectionPool’s contract is
correctly followed. It will also handle cases in which there are more
threads than connections: if all connections have been checked out, and a
thread tries to checkout a connection anyway, then <a
href="ConnectionPool.html">ConnectionPool</a> will wait until some other
thread has checked in a connection.</p>

<h2>Obtaining (checking out) a connection</h2>

<p>Connections can be obtained and used from a connection pool in several
ways:</p>
<ol><li>
<p>Simply use <a
href="../Base.html#method-i-connection">ActiveRecord::Base.connection</a>
as with Active Record 2.1 and earlier (pre-connection-pooling). Eventually,
when you’re done with the connection(s) and wish it to be returned to the
pool, you call <a
href="../Base.html#method-c-clear_active_connections-21">ActiveRecord::Base.clear_active_connections!</a>.
This will be the default behavior for Active Record when used in
conjunction with Action Pack’s request handling cycle.</p>
</li><li>
<p>Manually check out a connection from the pool with <a
href="../Base.html#method-c-connection_pool">ActiveRecord::Base.connection_pool</a>.checkout.
You are responsible for returning this connection to the pool when finished
by calling <a
href="../Base.html#method-c-connection_pool">ActiveRecord::Base.connection_pool</a>.checkin(connection).</p>
</li><li>
<p>Use <a
href="../Base.html#method-c-connection_pool">ActiveRecord::Base.connection_pool</a>.<a
href="ConnectionPool.html#method-i-with_connection">with_connection</a>(&amp;block),
which obtains a connection, yields it as the sole argument to the block,
and returns it to the pool after the block completes.</p>
</li></ol>

<p>Connections in the pool are actually <a
href="AbstractAdapter.html">AbstractAdapter</a> objects (or objects
compatible with AbstractAdapter’s interface).</p>

<h2>Options</h2>

<p>There are two connection-pooling-related options that you can add to your
database connection configuration:</p>
<ul><li>
<p><tt>pool</tt>: number indicating size of connection pool (default 5)</p>
</li><li>
<p><tt>wait_timeout</tt>: number of seconds to block and wait for a connection
before giving up and raising a timeout error (default 5 seconds).</p>
</li></ul>

    </div><!-- description -->

    
    
    
    <div id="5Buntitled-5D" class="documentation-section">
      

      

      

      
      <!-- Attributes -->
      <div id="attribute-method-details" class="method-section section">
        <h3 class="section-header">Attributes</h3>

        
        <div id="automatic_reconnect-attribute-method" class="method-detail">
          <a name="automatic_reconnect"></a>
          
          <a name="automatic_reconnect="></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">automatic_reconnect</span><span
              class="attribute-access-type">[RW]</span>
          </div>

          <div class="method-description">
          
          
          
          </div>
        </div>
        
        <div id="connections-attribute-method" class="method-detail">
          <a name="connections"></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">connections</span><span
              class="attribute-access-type">[R]</span>
          </div>

          <div class="method-description">
          
          
          
          </div>
        </div>
        
        <div id="spec-attribute-method" class="method-detail">
          <a name="spec"></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">spec</span><span
              class="attribute-access-type">[R]</span>
          </div>

          <div class="method-description">
          
          
          
          </div>
        </div>
        
      </div><!-- attribute-method-details -->
      

      <!-- Methods -->
      
      <div id="public-class-method-details" class="method-section section">
        <h3 class="section-header">Public Class Methods</h3>

      
        <div id="new-method" class="method-detail ">
          <a name="method-c-new"></a>

          
          <div class="method-heading">
            <span class="method-name">new</span><span
              class="method-args">(spec)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Creates a new <a href="ConnectionPool.html">ConnectionPool</a> object.
<tt>spec</tt> is a ConnectionSpecification object which describes database
connection information (e.g. adapter, host name, username, password, etc),
as well as the maximum size for this <a
href="ConnectionPool.html">ConnectionPool</a>.</p>

<p>The default <a href="ConnectionPool.html">ConnectionPool</a> maximum size
is 5.</p>
            

            
            <div class="method-source-code" id="new-source">
<pre>
<span class="ruby-comment"># File lib/active_record/connection_adapters/abstract/connection_pool.rb, line 71</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">spec</span>)
  <span class="ruby-keyword">super</span>()

  <span class="ruby-ivar">@spec</span> = <span class="ruby-identifier">spec</span>

  <span class="ruby-comment"># The cache of reserved connections mapped to threads</span>
  <span class="ruby-ivar">@reserved_connections</span> = {}

  <span class="ruby-ivar">@queue</span> = <span class="ruby-identifier">new_cond</span>
  <span class="ruby-ivar">@timeout</span> = <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">config</span>[<span class="ruby-value">:wait_timeout</span>] <span class="ruby-operator">||</span> <span class="ruby-value">5</span>

  <span class="ruby-comment"># default max pool size to 5</span>
  <span class="ruby-ivar">@size</span> = (<span class="ruby-identifier">spec</span>.<span class="ruby-identifier">config</span>[<span class="ruby-value">:pool</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">config</span>[<span class="ruby-value">:pool</span>].<span class="ruby-identifier">to_i</span>) <span class="ruby-operator">||</span> <span class="ruby-value">5</span>

  <span class="ruby-ivar">@connections</span>         = []
  <span class="ruby-ivar">@automatic_reconnect</span> = <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- new-source -->
            
          </div>

          

          
        </div><!-- new-method -->

      
      </div><!-- public-class-method-details -->
    
      <div id="public-instance-method-details" class="method-section section">
        <h3 class="section-header">Public Instance Methods</h3>

      
        <div id="active_connection-3F-method" class="method-detail ">
          <a name="method-i-active_connection-3F"></a>

          
          <div class="method-heading">
            <span class="method-name">active_connection?</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Is there an open connection that is being used for the current thread?</p>
            

            
            <div class="method-source-code" id="active_connection-3F-source">
<pre>
<span class="ruby-comment"># File lib/active_record/connection_adapters/abstract/connection_pool.rb, line 101</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">active_connection?</span>
  <span class="ruby-identifier">synchronize</span> <span class="ruby-keyword">do</span>
    <span class="ruby-ivar">@reserved_connections</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-identifier">current_connection_id</span>) {
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
    }.<span class="ruby-identifier">in_use?</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- active_connection-3F-source -->
            
          </div>

          

          
        </div><!-- active_connection-3F-method -->

      
        <div id="checkin-method" class="method-detail ">
          <a name="method-i-checkin"></a>

          
          <div class="method-heading">
            <span class="method-name">checkin</span><span
              class="method-args">(conn)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Check-in a database connection back into the pool, indicating that you no
longer need this connection.</p>

<p><tt>conn</tt>: an <a href="AbstractAdapter.html">AbstractAdapter</a>
object, which was obtained by earlier by calling <tt>checkout</tt> on this
pool.</p>
            

            
            <div class="method-source-code" id="checkin-source">
<pre>
<span class="ruby-comment"># File lib/active_record/connection_adapters/abstract/connection_pool.rb, line 279</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">checkin</span>(<span class="ruby-identifier">conn</span>)
  <span class="ruby-identifier">synchronize</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">run_callbacks</span> <span class="ruby-value">:checkin</span> <span class="ruby-keyword">do</span>
      <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">expire</span>
      <span class="ruby-ivar">@queue</span>.<span class="ruby-identifier">signal</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">release</span> <span class="ruby-identifier">conn</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- checkin-source -->
            
          </div>

          

          
        </div><!-- checkin-method -->

      
        <div id="checkout-method" class="method-detail ">
          <a name="method-i-checkout"></a>

          
          <div class="method-heading">
            <span class="method-name">checkout</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Check-out a database connection from the pool, indicating that you want to
use it. You should call <a
href="ConnectionPool.html#method-i-checkin">checkin</a> when you no longer
need this.</p>

<p>This is done by either returning an existing connection, or by creating a
new connection. If the maximum number of connections for this pool has
already been reached, but the pool is empty (i.e. they’re all being used),
then this method will wait until a thread has checked in a connection. The
wait time is bounded however: if no connection can be checked out within
the timeout specified for this pool, then a <a
href="../ConnectionTimeoutError.html">ConnectionTimeoutError</a> exception
will be raised.</p>

<p>Returns: an <a href="AbstractAdapter.html">AbstractAdapter</a> object.</p>

<p>Raises:</p>
<ul><li>
<p>ConnectionTimeoutError: no connection can be obtained from the pool within
the timeout period.</p>
</li></ul>
            

            
            <div class="method-source-code" id="checkout-source">
<pre>
<span class="ruby-comment"># File lib/active_record/connection_adapters/abstract/connection_pool.rb, line 232</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">checkout</span>
  <span class="ruby-identifier">synchronize</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">waited_time</span> = <span class="ruby-value">0</span>

    <span class="ruby-identifier">loop</span> <span class="ruby-keyword">do</span>
      <span class="ruby-identifier">conn</span> = <span class="ruby-ivar">@connections</span>.<span class="ruby-identifier">find</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">lease</span> }

      <span class="ruby-keyword">unless</span> <span class="ruby-identifier">conn</span>
        <span class="ruby-keyword">if</span> <span class="ruby-ivar">@connections</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&lt;</span> <span class="ruby-ivar">@size</span>
          <span class="ruby-identifier">conn</span> = <span class="ruby-identifier">checkout_new_connection</span>
          <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">lease</span>
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">conn</span>
        <span class="ruby-identifier">checkout_and_verify</span> <span class="ruby-identifier">conn</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">conn</span>
      <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">waited_time</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-ivar">@timeout</span>
        <span class="ruby-identifier">raise</span> <span class="ruby-constant">ConnectionTimeoutError</span>, <span class="ruby-node">&quot;could not obtain a database connection#{&quot; within #{@timeout} seconds&quot; if @timeout} (waited #{waited_time} seconds). The max pool size is currently #{@size}; consider increasing it.&quot;</span>
      <span class="ruby-keyword">end</span>

      <span class="ruby-comment"># Sometimes our wait can end because a connection is available,</span>
      <span class="ruby-comment"># but another thread can snatch it up first. If timeout hasn't</span>
      <span class="ruby-comment"># passed but no connection is avail, looks like that happened --</span>
      <span class="ruby-comment"># loop and wait again, for the time remaining on our timeout. </span>
      <span class="ruby-identifier">before_wait</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>
      <span class="ruby-ivar">@queue</span>.<span class="ruby-identifier">wait</span>( [<span class="ruby-ivar">@timeout</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">waited_time</span>, <span class="ruby-value">0</span>].<span class="ruby-identifier">max</span> )
      <span class="ruby-identifier">waited_time</span> <span class="ruby-operator">+=</span> (<span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">before_wait</span>)

      <span class="ruby-comment"># Will go away in Rails 4, when we don't clean up</span>
      <span class="ruby-comment"># after leaked connections automatically anymore. Right now, clean</span>
      <span class="ruby-comment"># up after we've returned from a 'wait' if it looks like it's</span>
      <span class="ruby-comment"># needed, then loop and try again. </span>
      <span class="ruby-keyword">if</span>(<span class="ruby-identifier">active_connections</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-ivar">@connections</span>.<span class="ruby-identifier">size</span>)
        <span class="ruby-identifier">clear_stale_cached_connections!</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- checkout-source -->
            
          </div>

          

          
        </div><!-- checkout-method -->

      
        <div id="clear_cache-21-method" class="method-detail ">
          <a name="method-i-clear_cache-21"></a>

          
          <div class="method-heading">
            <span class="method-name">clear_cache!</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="clear_cache-21-source">
<pre>
<span class="ruby-comment"># File lib/active_record/connection_adapters/abstract/connection_pool.rb, line 191</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">clear_cache!</span>
  <span class="ruby-identifier">with_connection</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">c</span>.<span class="ruby-identifier">schema_cache</span>.<span class="ruby-identifier">clear!</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- clear_cache-21-source -->
            
          </div>

          

          
        </div><!-- clear_cache-21-method -->

      
        <div id="clear_reloadable_connections-21-method" class="method-detail ">
          <a name="method-i-clear_reloadable_connections-21"></a>

          
          <div class="method-heading">
            <span class="method-name">clear_reloadable_connections!</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Clears the cache which maps classes.</p>
            

            
            <div class="method-source-code" id="clear_reloadable_connections-21-source">
<pre>
<span class="ruby-comment"># File lib/active_record/connection_adapters/abstract/connection_pool.rb, line 146</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">clear_reloadable_connections!</span>
  <span class="ruby-identifier">synchronize</span> <span class="ruby-keyword">do</span>
    <span class="ruby-ivar">@reserved_connections</span> = {}
    <span class="ruby-ivar">@connections</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">conn</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">checkin</span> <span class="ruby-identifier">conn</span>
      <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">disconnect!</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">requires_reloading?</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-ivar">@connections</span>.<span class="ruby-identifier">delete_if</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">conn</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">requires_reloading?</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- clear_reloadable_connections-21-source -->
            
          </div>

          

          
        </div><!-- clear_reloadable_connections-21-method -->

      
        <div id="clear_stale_cached_connections-21-method" class="method-detail ">
          <a name="method-i-clear_stale_cached_connections-21"></a>

          
          <div class="method-heading">
            <span class="method-name">clear_stale_cached_connections!</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Return any checked-out connections back to the pool by threads that are no
longer alive.</p>
            

            
            <div class="method-source-code" id="clear_stale_cached_connections-21-source">
<pre>
<span class="ruby-comment"># File lib/active_record/connection_adapters/abstract/connection_pool.rb, line 200</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">clear_stale_cached_connections!</span>
  <span class="ruby-identifier">keys</span> = <span class="ruby-ivar">@reserved_connections</span>.<span class="ruby-identifier">keys</span> <span class="ruby-operator">-</span> <span class="ruby-constant">Thread</span>.<span class="ruby-identifier">list</span>.<span class="ruby-identifier">find_all</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">t</span>.<span class="ruby-identifier">alive?</span>
  }.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">thread</span><span class="ruby-operator">|</span> <span class="ruby-identifier">thread</span>.<span class="ruby-identifier">object_id</span> }
  <span class="ruby-identifier">keys</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">conn</span> = <span class="ruby-ivar">@reserved_connections</span>[<span class="ruby-identifier">key</span>]
    <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Deprecation</span>.<span class="ruby-identifier">warn</span>(<span class="ruby-string">Database connections will not be closed automatically, please close yourdatabase connection at the end of the thread by calling `close` on yourconnection.  For example: ActiveRecord::Base.connection.close</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">in_use?</span>
    <span class="ruby-identifier">checkin</span> <span class="ruby-identifier">conn</span>
    <span class="ruby-ivar">@reserved_connections</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- clear_stale_cached_connections-21-source -->
            
          </div>

          

          
        </div><!-- clear_stale_cached_connections-21-method -->

      
        <div id="columns-method" class="method-detail ">
          <a name="method-i-columns"></a>

          
          <div class="method-heading">
            <span class="method-name">columns</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="columns-source">
<pre>
<span class="ruby-comment"># File lib/active_record/connection_adapters/abstract/connection_pool.rb, line 170</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">columns</span>
  <span class="ruby-identifier">with_connection</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">c</span>.<span class="ruby-identifier">schema_cache</span>.<span class="ruby-identifier">columns</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- columns-source -->
            
          </div>

          

          
        </div><!-- columns-method -->

      
        <div id="columns_hash-method" class="method-detail ">
          <a name="method-i-columns_hash"></a>

          
          <div class="method-heading">
            <span class="method-name">columns_hash</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="columns_hash-source">
<pre>
<span class="ruby-comment"># File lib/active_record/connection_adapters/abstract/connection_pool.rb, line 177</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">columns_hash</span>
  <span class="ruby-identifier">with_connection</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">c</span>.<span class="ruby-identifier">schema_cache</span>.<span class="ruby-identifier">columns_hash</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- columns_hash-source -->
            
          </div>

          

          
        </div><!-- columns_hash-method -->

      
        <div id="connected-3F-method" class="method-detail ">
          <a name="method-i-connected-3F"></a>

          
          <div class="method-heading">
            <span class="method-name">connected?</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Returns true if a connection has already been opened.</p>
            

            
            <div class="method-source-code" id="connected-3F-source">
<pre>
<span class="ruby-comment"># File lib/active_record/connection_adapters/abstract/connection_pool.rb, line 129</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">connected?</span>
  <span class="ruby-identifier">synchronize</span> { <span class="ruby-ivar">@connections</span>.<span class="ruby-identifier">any?</span> }
<span class="ruby-keyword">end</span></pre>
            </div><!-- connected-3F-source -->
            
          </div>

          

          
        </div><!-- connected-3F-method -->

      
        <div id="connection-method" class="method-detail ">
          <a name="method-i-connection"></a>

          
          <div class="method-heading">
            <span class="method-name">connection</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Retrieve the connection associated with the current thread, or call <a
href="ConnectionPool.html#method-i-checkout">checkout</a> to obtain one if
necessary.</p>

<p><a href="ConnectionPool.html#method-i-connection">connection</a> can be
called any number of times; the connection is held in a hash keyed by the
thread id.</p>
            

            
            <div class="method-source-code" id="connection-source">
<pre>
<span class="ruby-comment"># File lib/active_record/connection_adapters/abstract/connection_pool.rb, line 94</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">connection</span>
  <span class="ruby-identifier">synchronize</span> <span class="ruby-keyword">do</span>
    <span class="ruby-ivar">@reserved_connections</span>[<span class="ruby-identifier">current_connection_id</span>] <span class="ruby-operator">||=</span> <span class="ruby-identifier">checkout</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- connection-source -->
            
          </div>

          

          
        </div><!-- connection-method -->

      
        <div id="disconnect-21-method" class="method-detail ">
          <a name="method-i-disconnect-21"></a>

          
          <div class="method-heading">
            <span class="method-name">disconnect!</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Disconnects all connections in the pool, and clears the pool.</p>
            

            
            <div class="method-source-code" id="disconnect-21-source">
<pre>
<span class="ruby-comment"># File lib/active_record/connection_adapters/abstract/connection_pool.rb, line 134</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">disconnect!</span>
  <span class="ruby-identifier">synchronize</span> <span class="ruby-keyword">do</span>
    <span class="ruby-ivar">@reserved_connections</span> = {}
    <span class="ruby-ivar">@connections</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">conn</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">checkin</span> <span class="ruby-identifier">conn</span>
      <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">disconnect!</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-ivar">@connections</span> = []
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- disconnect-21-source -->
            
          </div>

          

          
        </div><!-- disconnect-21-method -->

      
        <div id="primary_keys-method" class="method-detail ">
          <a name="method-i-primary_keys"></a>

          
          <div class="method-heading">
            <span class="method-name">primary_keys</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="primary_keys-source">
<pre>
<span class="ruby-comment"># File lib/active_record/connection_adapters/abstract/connection_pool.rb, line 184</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">primary_keys</span>
  <span class="ruby-identifier">with_connection</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">c</span>.<span class="ruby-identifier">schema_cache</span>.<span class="ruby-identifier">primary_keys</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- primary_keys-source -->
            
          </div>

          

          
        </div><!-- primary_keys-method -->

      
        <div id="release_connection-method" class="method-detail ">
          <a name="method-i-release_connection"></a>

          
          <div class="method-heading">
            <span class="method-name">release_connection</span><span
              class="method-args">(with_id = current_connection_id)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Signal that the thread is finished with the current connection. <a
href="ConnectionPool.html#method-i-release_connection">release_connection</a>
releases the connection-thread association and returns the connection to
the pool.</p>
            

            
            <div class="method-source-code" id="release_connection-source">
<pre>
<span class="ruby-comment"># File lib/active_record/connection_adapters/abstract/connection_pool.rb, line 112</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">release_connection</span>(<span class="ruby-identifier">with_id</span> = <span class="ruby-identifier">current_connection_id</span>)
  <span class="ruby-identifier">conn</span> = <span class="ruby-ivar">@reserved_connections</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">with_id</span>)
  <span class="ruby-identifier">checkin</span> <span class="ruby-identifier">conn</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">conn</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- release_connection-source -->
            
          </div>

          

          
        </div><!-- release_connection-method -->

      
        <div id="with_connection-method" class="method-detail ">
          <a name="method-i-with_connection"></a>

          
          <div class="method-heading">
            <span class="method-name">with_connection</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>If a connection already exists yield it to the block. If no connection
exists checkout a connection, yield it to the block, and checkin the
connection when finished.</p>
            

            
            <div class="method-source-code" id="with_connection-source">
<pre>
<span class="ruby-comment"># File lib/active_record/connection_adapters/abstract/connection_pool.rb, line 120</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">with_connection</span>
  <span class="ruby-identifier">connection_id</span> = <span class="ruby-identifier">current_connection_id</span>
  <span class="ruby-identifier">fresh_connection</span> = <span class="ruby-keyword">true</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">active_connection?</span>
  <span class="ruby-keyword">yield</span> <span class="ruby-identifier">connection</span>
<span class="ruby-keyword">ensure</span>
  <span class="ruby-identifier">release_connection</span>(<span class="ruby-identifier">connection_id</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">fresh_connection</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- with_connection-source -->
            
          </div>

          

          
        </div><!-- with_connection-method -->

      
      </div><!-- public-instance-method-details -->
    
    </div><!-- 5Buntitled-5D -->
  

  </div><!-- documentation -->

  <div id="validator-badges">
    <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
    <p><small>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish
      Rdoc Generator</a> 2</small>.</p>
  </div>

</body>
</html>

