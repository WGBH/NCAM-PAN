<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />

  <title>Class: ActiveRecord::Relation</title>

  <link rel="stylesheet" href="../rdoc.css" type="text/css" media="screen" />

  <script src="../js/jquery.js" type="text/javascript" charset="utf-8"></script>
  <script src="../js/thickbox-compressed.js" type="text/javascript" charset="utf-8"></script>
  <script src="../js/quicksearch.js" type="text/javascript" charset="utf-8"></script>
  <script src="../js/darkfish.js" type="text/javascript" charset="utf-8"></script>

</head>
<body id="top" class="class">

  <div id="metadata">
    <div id="home-metadata">
      <div id="home-section" class="section">
        <h3 class="section-header">
          <a href="../index.html">Home</a>
          <a href="../index.html#classes">Classes</a>
          <a href="../index.html#methods">Methods</a>
        </h3>
      </div>
    </div>

    <div id="file-metadata">
      <div id="file-list-section" class="section">
        <h3 class="section-header">In Files</h3>
        <div class="section-body">
          <ul>
          
            <li><a href="../lib/active_record/relation_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="lib/active_record/relation.rb">lib/active_record/relation.rb</a></li>
          
          </ul>
        </div>
      </div>

      
    </div>

    <div id="class-metadata">
      
      <!-- Parent Class -->
      <div id="parent-class-section" class="section">
        <h3 class="section-header">Parent</h3>
        
        <p class="link">Object</p>
        
      </div>
      

      

      

      
      <!-- Method Quickref -->
      <div id="method-list-section" class="section">
        <h3 class="section-header">Methods</h3>
        <ul class="link-list">
          
          <li><a href="#method-c-new">::new</a></li>
          
          <li><a href="#method-i-3D-3D">#==</a></li>
          
          <li><a href="#method-i-any-3F">#any?</a></li>
          
          <li><a href="#method-i-build">#build</a></li>
          
          <li><a href="#method-i-create">#create</a></li>
          
          <li><a href="#method-i-create-21">#create!</a></li>
          
          <li><a href="#method-i-delete">#delete</a></li>
          
          <li><a href="#method-i-delete_all">#delete_all</a></li>
          
          <li><a href="#method-i-destroy">#destroy</a></li>
          
          <li><a href="#method-i-destroy_all">#destroy_all</a></li>
          
          <li><a href="#method-i-eager_loading-3F">#eager_loading?</a></li>
          
          <li><a href="#method-i-empty-3F">#empty?</a></li>
          
          <li><a href="#method-i-explain">#explain</a></li>
          
          <li><a href="#method-i-first_or_create">#first_or_create</a></li>
          
          <li><a href="#method-i-first_or_create-21">#first_or_create!</a></li>
          
          <li><a href="#method-i-first_or_initialize">#first_or_initialize</a></li>
          
          <li><a href="#method-i-initialize_copy">#initialize_copy</a></li>
          
          <li><a href="#method-i-insert">#insert</a></li>
          
          <li><a href="#method-i-inspect">#inspect</a></li>
          
          <li><a href="#method-i-joined_includes_values">#joined_includes_values</a></li>
          
          <li><a href="#method-i-many-3F">#many?</a></li>
          
          <li><a href="#method-i-new">#new</a></li>
          
          <li><a href="#method-i-reload">#reload</a></li>
          
          <li><a href="#method-i-reset">#reset</a></li>
          
          <li><a href="#method-i-scope_for_create">#scope_for_create</a></li>
          
          <li><a href="#method-i-scoping">#scoping</a></li>
          
          <li><a href="#method-i-size">#size</a></li>
          
          <li><a href="#method-i-to_a">#to_a</a></li>
          
          <li><a href="#method-i-to_sql">#to_sql</a></li>
          
          <li><a href="#method-i-update">#update</a></li>
          
          <li><a href="#method-i-update_all">#update_all</a></li>
          
          <li><a href="#method-i-where_values_hash">#where_values_hash</a></li>
          
        </ul>
      </div>
      

      
      <!-- Included Modules -->
      <div id="includes-section" class="section">
        <h3 class="section-header">Included Modules</h3>
        <ul class="link-list">
        
        
          <li><a class="include" href="FinderMethods.html">ActiveRecord::FinderMethods</a></li>
        
        
        
          <li><a class="include" href="Calculations.html">ActiveRecord::Calculations</a></li>
        
        
        
          <li><a class="include" href="SpawnMethods.html">ActiveRecord::SpawnMethods</a></li>
        
        
        
          <li><a class="include" href="QueryMethods.html">ActiveRecord::QueryMethods</a></li>
        
        
        
          <li><a class="include" href="Batches.html">ActiveRecord::Batches</a></li>
        
        
        
          <li><a class="include" href="Explain.html">ActiveRecord::Explain</a></li>
        
        
        
          <li><a class="include" href="Delegation.html">ActiveRecord::Delegation</a></li>
        
        
        </ul>
      </div>
      
    </div>

    <div id="project-metadata">
      
      
      <div id="fileindex-section" class="section project-section">
        <h3 class="section-header">Files</h3>
        <ul>
        
          <li class="file"><a href="../README_rdoc.html">README.rdoc</a></li>
        
        </ul>
      </div>
      

      <div id="classindex-section" class="section project-section">
        <h3 class="section-header">Class/Module Index
          <span class="search-toggle"><img src="../images/find.png"
            height="16" width="16" alt="[+]"
            title="show/hide quicksearch" /></span></h3>
        <form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
        <fieldset>
          <legend>Quicksearch</legend>
          <input type="text" name="quicksearch" value=""
            class="quicksearch-field" />
        </fieldset>
        </form>

        <ul class="link-list">
        
          <li><a href="../ActiveRecord.html">ActiveRecord</a></li>
        
          <li><a href="../ActiveRecord/ActiveRecordError.html">ActiveRecord::ActiveRecordError</a></li>
        
          <li><a href="../ActiveRecord/AdapterNotFound.html">ActiveRecord::AdapterNotFound</a></li>
        
          <li><a href="../ActiveRecord/AdapterNotSpecified.html">ActiveRecord::AdapterNotSpecified</a></li>
        
          <li><a href="../ActiveRecord/Aggregations.html">ActiveRecord::Aggregations</a></li>
        
          <li><a href="../ActiveRecord/Aggregations/ClassMethods.html">ActiveRecord::Aggregations::ClassMethods</a></li>
        
          <li><a href="../ActiveRecord/AssociationTypeMismatch.html">ActiveRecord::AssociationTypeMismatch</a></li>
        
          <li><a href="../ActiveRecord/Associations.html">ActiveRecord::Associations</a></li>
        
          <li><a href="../ActiveRecord/Associations/ClassMethods.html">ActiveRecord::Associations::ClassMethods</a></li>
        
          <li><a href="../ActiveRecord/AttributeAssignment.html">ActiveRecord::AttributeAssignment</a></li>
        
          <li><a href="../ActiveRecord/AttributeAssignment/ClassMethods.html">ActiveRecord::AttributeAssignment::ClassMethods</a></li>
        
          <li><a href="../ActiveRecord/AttributeAssignmentError.html">ActiveRecord::AttributeAssignmentError</a></li>
        
          <li><a href="../ActiveRecord/AttributeMethods.html">ActiveRecord::AttributeMethods</a></li>
        
          <li><a href="../ActiveRecord/AttributeMethods/BeforeTypeCast.html">ActiveRecord::AttributeMethods::BeforeTypeCast</a></li>
        
          <li><a href="../ActiveRecord/AttributeMethods/ClassMethods.html">ActiveRecord::AttributeMethods::ClassMethods</a></li>
        
          <li><a href="../ActiveRecord/AttributeMethods/DeprecatedUnderscoreRead.html">ActiveRecord::AttributeMethods::DeprecatedUnderscoreRead</a></li>
        
          <li><a href="../ActiveRecord/AttributeMethods/DeprecatedUnderscoreRead/ClassMethods.html">ActiveRecord::AttributeMethods::DeprecatedUnderscoreRead::ClassMethods</a></li>
        
          <li><a href="../ActiveRecord/AttributeMethods/Dirty.html">ActiveRecord::AttributeMethods::Dirty</a></li>
        
          <li><a href="../ActiveRecord/AttributeMethods/PrimaryKey.html">ActiveRecord::AttributeMethods::PrimaryKey</a></li>
        
          <li><a href="../ActiveRecord/AttributeMethods/PrimaryKey/ClassMethods.html">ActiveRecord::AttributeMethods::PrimaryKey::ClassMethods</a></li>
        
          <li><a href="../ActiveRecord/AttributeMethods/Query.html">ActiveRecord::AttributeMethods::Query</a></li>
        
          <li><a href="../ActiveRecord/AttributeMethods/Read.html">ActiveRecord::AttributeMethods::Read</a></li>
        
          <li><a href="../ActiveRecord/AttributeMethods/Read/ClassMethods.html">ActiveRecord::AttributeMethods::Read::ClassMethods</a></li>
        
          <li><a href="../ActiveRecord/AttributeMethods/Serialization.html">ActiveRecord::AttributeMethods::Serialization</a></li>
        
          <li><a href="../ActiveRecord/AttributeMethods/Serialization/Attribute.html">ActiveRecord::AttributeMethods::Serialization::Attribute</a></li>
        
          <li><a href="../ActiveRecord/AttributeMethods/Serialization/ClassMethods.html">ActiveRecord::AttributeMethods::Serialization::ClassMethods</a></li>
        
          <li><a href="../ActiveRecord/AttributeMethods/TimeZoneConversion.html">ActiveRecord::AttributeMethods::TimeZoneConversion</a></li>
        
          <li><a href="../ActiveRecord/AttributeMethods/TimeZoneConversion/ClassMethods.html">ActiveRecord::AttributeMethods::TimeZoneConversion::ClassMethods</a></li>
        
          <li><a href="../ActiveRecord/AttributeMethods/Write.html">ActiveRecord::AttributeMethods::Write</a></li>
        
          <li><a href="../ActiveRecord/AttributeMethods/Write/ClassMethods.html">ActiveRecord::AttributeMethods::Write::ClassMethods</a></li>
        
          <li><a href="../ActiveRecord/AutosaveAssociation.html">ActiveRecord::AutosaveAssociation</a></li>
        
          <li><a href="../ActiveRecord/AutosaveAssociation/ClassMethods.html">ActiveRecord::AutosaveAssociation::ClassMethods</a></li>
        
          <li><a href="../ActiveRecord/Base.html">ActiveRecord::Base</a></li>
        
          <li><a href="../ActiveRecord/Batches.html">ActiveRecord::Batches</a></li>
        
          <li><a href="../ActiveRecord/Calculations.html">ActiveRecord::Calculations</a></li>
        
          <li><a href="../ActiveRecord/Callbacks.html">ActiveRecord::Callbacks</a></li>
        
          <li><a href="../ActiveRecord/Coders.html">ActiveRecord::Coders</a></li>
        
          <li><a href="../ActiveRecord/ConfigurationError.html">ActiveRecord::ConfigurationError</a></li>
        
          <li><a href="../ActiveRecord/ConnectionAdapters.html">ActiveRecord::ConnectionAdapters</a></li>
        
          <li><a href="../ActiveRecord/ConnectionAdapters/AbstractAdapter.html">ActiveRecord::ConnectionAdapters::AbstractAdapter</a></li>
        
          <li><a href="../ActiveRecord/ConnectionAdapters/AbstractMysqlAdapter.html">ActiveRecord::ConnectionAdapters::AbstractMysqlAdapter</a></li>
        
          <li><a href="../ActiveRecord/ConnectionAdapters/ConnectionHandler.html">ActiveRecord::ConnectionAdapters::ConnectionHandler</a></li>
        
          <li><a href="../ActiveRecord/ConnectionAdapters/ConnectionManagement.html">ActiveRecord::ConnectionAdapters::ConnectionManagement</a></li>
        
          <li><a href="../ActiveRecord/ConnectionAdapters/ConnectionPool.html">ActiveRecord::ConnectionAdapters::ConnectionPool</a></li>
        
          <li><a href="../ActiveRecord/ConnectionAdapters/DatabaseLimits.html">ActiveRecord::ConnectionAdapters::DatabaseLimits</a></li>
        
          <li><a href="../ActiveRecord/ConnectionAdapters/DatabaseStatements.html">ActiveRecord::ConnectionAdapters::DatabaseStatements</a></li>
        
          <li><a href="../ActiveRecord/ConnectionAdapters/Mysql2Adapter.html">ActiveRecord::ConnectionAdapters::Mysql2Adapter</a></li>
        
          <li><a href="../ActiveRecord/ConnectionAdapters/MysqlAdapter.html">ActiveRecord::ConnectionAdapters::MysqlAdapter</a></li>
        
          <li><a href="../ActiveRecord/ConnectionAdapters/MysqlAdapter/StatementPool.html">ActiveRecord::ConnectionAdapters::MysqlAdapter::StatementPool</a></li>
        
          <li><a href="../ActiveRecord/ConnectionAdapters/PostgreSQLAdapter.html">ActiveRecord::ConnectionAdapters::PostgreSQLAdapter</a></li>
        
          <li><a href="../ActiveRecord/ConnectionAdapters/PostgreSQLAdapter/StatementPool.html">ActiveRecord::ConnectionAdapters::PostgreSQLAdapter::StatementPool</a></li>
        
          <li><a href="../ActiveRecord/ConnectionAdapters/PostgreSQLAdapter/TableDefinition.html">ActiveRecord::ConnectionAdapters::PostgreSQLAdapter::TableDefinition</a></li>
        
          <li><a href="../ActiveRecord/ConnectionAdapters/PostgreSQLAdapter/Utils.html">ActiveRecord::ConnectionAdapters::PostgreSQLAdapter::Utils</a></li>
        
          <li><a href="../ActiveRecord/ConnectionAdapters/PostgreSQLColumn.html">ActiveRecord::ConnectionAdapters::PostgreSQLColumn</a></li>
        
          <li><a href="../ActiveRecord/ConnectionAdapters/QueryCache.html">ActiveRecord::ConnectionAdapters::QueryCache</a></li>
        
          <li><a href="../ActiveRecord/ConnectionAdapters/Quoting.html">ActiveRecord::ConnectionAdapters::Quoting</a></li>
        
          <li><a href="../ActiveRecord/ConnectionAdapters/SQLiteAdapter.html">ActiveRecord::ConnectionAdapters::SQLiteAdapter</a></li>
        
          <li><a href="../ActiveRecord/ConnectionAdapters/SQLiteAdapter/ExplainPrettyPrinter.html">ActiveRecord::ConnectionAdapters::SQLiteAdapter::ExplainPrettyPrinter</a></li>
        
          <li><a href="../ActiveRecord/ConnectionAdapters/SQLiteAdapter/StatementPool.html">ActiveRecord::ConnectionAdapters::SQLiteAdapter::StatementPool</a></li>
        
          <li><a href="../ActiveRecord/ConnectionAdapters/SQLiteAdapter/Version.html">ActiveRecord::ConnectionAdapters::SQLiteAdapter::Version</a></li>
        
          <li><a href="../ActiveRecord/ConnectionAdapters/SchemaCache.html">ActiveRecord::ConnectionAdapters::SchemaCache</a></li>
        
          <li><a href="../ActiveRecord/ConnectionAdapters/SchemaStatements.html">ActiveRecord::ConnectionAdapters::SchemaStatements</a></li>
        
          <li><a href="../ActiveRecord/ConnectionAdapters/StatementPool.html">ActiveRecord::ConnectionAdapters::StatementPool</a></li>
        
          <li><a href="../ActiveRecord/ConnectionAdapters/Table.html">ActiveRecord::ConnectionAdapters::Table</a></li>
        
          <li><a href="../ActiveRecord/ConnectionAdapters/TableDefinition.html">ActiveRecord::ConnectionAdapters::TableDefinition</a></li>
        
          <li><a href="../ActiveRecord/ConnectionNotEstablished.html">ActiveRecord::ConnectionNotEstablished</a></li>
        
          <li><a href="../ActiveRecord/ConnectionTimeoutError.html">ActiveRecord::ConnectionTimeoutError</a></li>
        
          <li><a href="../ActiveRecord/CounterCache.html">ActiveRecord::CounterCache</a></li>
        
          <li><a href="../ActiveRecord/DangerousAttributeError.html">ActiveRecord::DangerousAttributeError</a></li>
        
          <li><a href="../ActiveRecord/Delegation.html">ActiveRecord::Delegation</a></li>
        
          <li><a href="../ActiveRecord/DynamicFinderMatch.html">ActiveRecord::DynamicFinderMatch</a></li>
        
          <li><a href="../ActiveRecord/DynamicMatchers.html">ActiveRecord::DynamicMatchers</a></li>
        
          <li><a href="../ActiveRecord/DynamicScopeMatch.html">ActiveRecord::DynamicScopeMatch</a></li>
        
          <li><a href="../ActiveRecord/Explain.html">ActiveRecord::Explain</a></li>
        
          <li><a href="../ActiveRecord/FinderMethods.html">ActiveRecord::FinderMethods</a></li>
        
          <li><a href="../ActiveRecord/Fixtures.html">ActiveRecord::Fixtures</a></li>
        
          <li><a href="../ActiveRecord/Fixtures/File.html">ActiveRecord::Fixtures::File</a></li>
        
          <li><a href="../ActiveRecord/Generators.html">ActiveRecord::Generators</a></li>
        
          <li><a href="../ActiveRecord/Generators/Migration.html">ActiveRecord::Generators::Migration</a></li>
        
          <li><a href="../ActiveRecord/Generators/MigrationGenerator.html">ActiveRecord::Generators::MigrationGenerator</a></li>
        
          <li><a href="../ActiveRecord/Generators/ModelGenerator.html">ActiveRecord::Generators::ModelGenerator</a></li>
        
          <li><a href="../ActiveRecord/Generators/ObserverGenerator.html">ActiveRecord::Generators::ObserverGenerator</a></li>
        
          <li><a href="../ActiveRecord/Generators/SessionMigrationGenerator.html">ActiveRecord::Generators::SessionMigrationGenerator</a></li>
        
          <li><a href="../ActiveRecord/IdentityMap.html">ActiveRecord::IdentityMap</a></li>
        
          <li><a href="../ActiveRecord/IdentityMap/Middleware.html">ActiveRecord::IdentityMap::Middleware</a></li>
        
          <li><a href="../ActiveRecord/Inheritance.html">ActiveRecord::Inheritance</a></li>
        
          <li><a href="../ActiveRecord/Inheritance/ClassMethods.html">ActiveRecord::Inheritance::ClassMethods</a></li>
        
          <li><a href="../ActiveRecord/Integration.html">ActiveRecord::Integration</a></li>
        
          <li><a href="../ActiveRecord/InvalidForeignKey.html">ActiveRecord::InvalidForeignKey</a></li>
        
          <li><a href="../ActiveRecord/IrreversibleMigration.html">ActiveRecord::IrreversibleMigration</a></li>
        
          <li><a href="../ActiveRecord/Locking.html">ActiveRecord::Locking</a></li>
        
          <li><a href="../ActiveRecord/Locking/Optimistic.html">ActiveRecord::Locking::Optimistic</a></li>
        
          <li><a href="../ActiveRecord/Locking/Optimistic/ClassMethods.html">ActiveRecord::Locking::Optimistic::ClassMethods</a></li>
        
          <li><a href="../ActiveRecord/Locking/Pessimistic.html">ActiveRecord::Locking::Pessimistic</a></li>
        
          <li><a href="../ActiveRecord/LogSubscriber.html">ActiveRecord::LogSubscriber</a></li>
        
          <li><a href="../ActiveRecord/Migration.html">ActiveRecord::Migration</a></li>
        
          <li><a href="../ActiveRecord/Migration/CommandRecorder.html">ActiveRecord::Migration::CommandRecorder</a></li>
        
          <li><a href="../ActiveRecord/MigrationProxy.html">ActiveRecord::MigrationProxy</a></li>
        
          <li><a href="../ActiveRecord/ModelSchema.html">ActiveRecord::ModelSchema</a></li>
        
          <li><a href="../ActiveRecord/ModelSchema/ClassMethods.html">ActiveRecord::ModelSchema::ClassMethods</a></li>
        
          <li><a href="../ActiveRecord/MultiparameterAssignmentErrors.html">ActiveRecord::MultiparameterAssignmentErrors</a></li>
        
          <li><a href="../ActiveRecord/NestedAttributes.html">ActiveRecord::NestedAttributes</a></li>
        
          <li><a href="../ActiveRecord/NestedAttributes/ClassMethods.html">ActiveRecord::NestedAttributes::ClassMethods</a></li>
        
          <li><a href="../ActiveRecord/NestedAttributes/TooManyRecords.html">ActiveRecord::NestedAttributes::TooManyRecords</a></li>
        
          <li><a href="../ActiveRecord/Observer.html">ActiveRecord::Observer</a></li>
        
          <li><a href="../ActiveRecord/Persistence.html">ActiveRecord::Persistence</a></li>
        
          <li><a href="../ActiveRecord/Persistence/ClassMethods.html">ActiveRecord::Persistence::ClassMethods</a></li>
        
          <li><a href="../ActiveRecord/PreparedStatementInvalid.html">ActiveRecord::PreparedStatementInvalid</a></li>
        
          <li><a href="../ActiveRecord/QueryCache.html">ActiveRecord::QueryCache</a></li>
        
          <li><a href="../ActiveRecord/QueryCache/ClassMethods.html">ActiveRecord::QueryCache::ClassMethods</a></li>
        
          <li><a href="../ActiveRecord/QueryMethods.html">ActiveRecord::QueryMethods</a></li>
        
          <li><a href="../ActiveRecord/Querying.html">ActiveRecord::Querying</a></li>
        
          <li><a href="../ActiveRecord/Railtie.html">ActiveRecord::Railtie</a></li>
        
          <li><a href="../ActiveRecord/Railties.html">ActiveRecord::Railties</a></li>
        
          <li><a href="../ActiveRecord/Railties/ControllerRuntime.html">ActiveRecord::Railties::ControllerRuntime</a></li>
        
          <li><a href="../ActiveRecord/Railties/ControllerRuntime/ClassMethods.html">ActiveRecord::Railties::ControllerRuntime::ClassMethods</a></li>
        
          <li><a href="../ActiveRecord/ReadOnlyRecord.html">ActiveRecord::ReadOnlyRecord</a></li>
        
          <li><a href="../ActiveRecord/ReadonlyAttributes.html">ActiveRecord::ReadonlyAttributes</a></li>
        
          <li><a href="../ActiveRecord/ReadonlyAttributes/ClassMethods.html">ActiveRecord::ReadonlyAttributes::ClassMethods</a></li>
        
          <li><a href="../ActiveRecord/RecordInvalid.html">ActiveRecord::RecordInvalid</a></li>
        
          <li><a href="../ActiveRecord/RecordNotFound.html">ActiveRecord::RecordNotFound</a></li>
        
          <li><a href="../ActiveRecord/RecordNotSaved.html">ActiveRecord::RecordNotSaved</a></li>
        
          <li><a href="../ActiveRecord/RecordNotUnique.html">ActiveRecord::RecordNotUnique</a></li>
        
          <li><a href="../ActiveRecord/Reflection.html">ActiveRecord::Reflection</a></li>
        
          <li><a href="../ActiveRecord/Reflection/ClassMethods.html">ActiveRecord::Reflection::ClassMethods</a></li>
        
          <li><a href="../ActiveRecord/Reflection/MacroReflection.html">ActiveRecord::Reflection::MacroReflection</a></li>
        
          <li><a href="../ActiveRecord/Relation.html">ActiveRecord::Relation</a></li>
        
          <li><a href="../ActiveRecord/Result.html">ActiveRecord::Result</a></li>
        
          <li><a href="../ActiveRecord/Rollback.html">ActiveRecord::Rollback</a></li>
        
          <li><a href="../ActiveRecord/Sanitization.html">ActiveRecord::Sanitization</a></li>
        
          <li><a href="../ActiveRecord/Sanitization/ClassMethods.html">ActiveRecord::Sanitization::ClassMethods</a></li>
        
          <li><a href="../ActiveRecord/Schema.html">ActiveRecord::Schema</a></li>
        
          <li><a href="../ActiveRecord/Scoping.html">ActiveRecord::Scoping</a></li>
        
          <li><a href="../ActiveRecord/Scoping/ClassMethods.html">ActiveRecord::Scoping::ClassMethods</a></li>
        
          <li><a href="../ActiveRecord/Scoping/Default.html">ActiveRecord::Scoping::Default</a></li>
        
          <li><a href="../ActiveRecord/Scoping/Default/ClassMethods.html">ActiveRecord::Scoping::Default::ClassMethods</a></li>
        
          <li><a href="../ActiveRecord/Scoping/Named.html">ActiveRecord::Scoping::Named</a></li>
        
          <li><a href="../ActiveRecord/Scoping/Named/ClassMethods.html">ActiveRecord::Scoping::Named::ClassMethods</a></li>
        
          <li><a href="../ActiveRecord/Serialization.html">ActiveRecord::Serialization</a></li>
        
          <li><a href="../ActiveRecord/SerializationTypeMismatch.html">ActiveRecord::SerializationTypeMismatch</a></li>
        
          <li><a href="../ActiveRecord/SessionStore.html">ActiveRecord::SessionStore</a></li>
        
          <li><a href="../ActiveRecord/SessionStore/Session.html">ActiveRecord::SessionStore::Session</a></li>
        
          <li><a href="../ActiveRecord/SessionStore/SqlBypass.html">ActiveRecord::SessionStore::SqlBypass</a></li>
        
          <li><a href="../ActiveRecord/SpawnMethods.html">ActiveRecord::SpawnMethods</a></li>
        
          <li><a href="../ActiveRecord/StaleObjectError.html">ActiveRecord::StaleObjectError</a></li>
        
          <li><a href="../ActiveRecord/StatementInvalid.html">ActiveRecord::StatementInvalid</a></li>
        
          <li><a href="../ActiveRecord/Store.html">ActiveRecord::Store</a></li>
        
          <li><a href="../ActiveRecord/Store/ClassMethods.html">ActiveRecord::Store::ClassMethods</a></li>
        
          <li><a href="../ActiveRecord/TestFixtures.html">ActiveRecord::TestFixtures</a></li>
        
          <li><a href="../ActiveRecord/TestFixtures/ClassMethods.html">ActiveRecord::TestFixtures::ClassMethods</a></li>
        
          <li><a href="../ActiveRecord/ThrowResult.html">ActiveRecord::ThrowResult</a></li>
        
          <li><a href="../ActiveRecord/Timestamp.html">ActiveRecord::Timestamp</a></li>
        
          <li><a href="../ActiveRecord/Transactions.html">ActiveRecord::Transactions</a></li>
        
          <li><a href="../ActiveRecord/Transactions/ClassMethods.html">ActiveRecord::Transactions::ClassMethods</a></li>
        
          <li><a href="../ActiveRecord/Translation.html">ActiveRecord::Translation</a></li>
        
          <li><a href="../ActiveRecord/UnknownAttributeError.html">ActiveRecord::UnknownAttributeError</a></li>
        
          <li><a href="../ActiveRecord/UnknownPrimaryKey.html">ActiveRecord::UnknownPrimaryKey</a></li>
        
          <li><a href="../ActiveRecord/Validations.html">ActiveRecord::Validations</a></li>
        
          <li><a href="../ActiveRecord/Validations/AssociatedValidator.html">ActiveRecord::Validations::AssociatedValidator</a></li>
        
          <li><a href="../ActiveRecord/Validations/ClassMethods.html">ActiveRecord::Validations::ClassMethods</a></li>
        
          <li><a href="../ActiveRecord/Validations/UniquenessValidator.html">ActiveRecord::Validations::UniquenessValidator</a></li>
        
          <li><a href="../ActiveRecord/WrappedDatabaseException.html">ActiveRecord::WrappedDatabaseException</a></li>
        
          <li><a href="../Mysql.html">Mysql</a></li>
        
          <li><a href="../Mysql/Result.html">Mysql::Result</a></li>
        
          <li><a href="../Mysql/Stmt.html">Mysql::Stmt</a></li>
        
          <li><a href="../Mysql/Time.html">Mysql::Time</a></li>
        
          <li><a href="../ArJdbcMySQL.html">ArJdbcMySQL</a></li>
        
          <li><a href="../ArJdbcMySQL/Error.html">ArJdbcMySQL::Error</a></li>
        
        </ul>
        <div id="no-class-search-results" style="display: none;">No matching classes.</div>
      </div>

      
    </div>
  </div>

  <div id="documentation">
    <h1 class="class">ActiveRecord::Relation</h1>

    <div id="description" class="description">
      
<h1>Active Record <a href="Relation.html">Relation</a></h1>

    </div><!-- description -->

    
    
    
    <div id="5Buntitled-5D" class="documentation-section">
      

      

      
      <!-- Constants -->
      <div id="constants-list" class="section">
        <h3 class="section-header">Constants</h3>
        <dl>
        
          <dt><a name="ASSOCIATION_METHODS">ASSOCIATION_METHODS</a></dt>
          
          <dd class="description"></dd>
          
        
          <dt><a name="JoinOperation">JoinOperation</a></dt>
          
          <dd class="description"></dd>
          
        
          <dt><a name="MULTI_VALUE_METHODS">MULTI_VALUE_METHODS</a></dt>
          
          <dd class="description"></dd>
          
        
          <dt><a name="SINGLE_VALUE_METHODS">SINGLE_VALUE_METHODS</a></dt>
          
          <dd class="description"></dd>
          
        
        </dl>
      </div>
      

      
      <!-- Attributes -->
      <div id="attribute-method-details" class="method-section section">
        <h3 class="section-header">Attributes</h3>

        
        <div id="default_scoped-attribute-method" class="method-detail">
          <a name="default_scoped"></a>
          
          <a name="default_scoped="></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">default_scoped</span><span
              class="attribute-access-type">[RW]</span>
          </div>

          <div class="method-description">
          
          
          
          </div>
        </div>
        
        <div id="default_scoped-3F-attribute-method" class="method-detail">
          <a name="default_scoped?"></a>
          
          <a name="default_scoped?="></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">default_scoped?</span><span
              class="attribute-access-type">[RW]</span>
          </div>

          <div class="method-description">
          
          
          
          </div>
        </div>
        
        <div id="extensions-attribute-method" class="method-detail">
          <a name="extensions"></a>
          
          <a name="extensions="></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">extensions</span><span
              class="attribute-access-type">[RW]</span>
          </div>

          <div class="method-description">
          
          
          
          </div>
        </div>
        
        <div id="klass-attribute-method" class="method-detail">
          <a name="klass"></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">klass</span><span
              class="attribute-access-type">[R]</span>
          </div>

          <div class="method-description">
          
          
          
          </div>
        </div>
        
        <div id="loaded-attribute-method" class="method-detail">
          <a name="loaded"></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">loaded</span><span
              class="attribute-access-type">[R]</span>
          </div>

          <div class="method-description">
          
          
          
          </div>
        </div>
        
        <div id="loaded-3F-attribute-method" class="method-detail">
          <a name="loaded?"></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">loaded?</span><span
              class="attribute-access-type">[R]</span>
          </div>

          <div class="method-description">
          
          
          
          </div>
        </div>
        
        <div id="table-attribute-method" class="method-detail">
          <a name="table"></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">table</span><span
              class="attribute-access-type">[R]</span>
          </div>

          <div class="method-description">
          
          
          
          </div>
        </div>
        
      </div><!-- attribute-method-details -->
      

      <!-- Methods -->
      
      <div id="public-class-method-details" class="method-section section">
        <h3 class="section-header">Public Class Methods</h3>

      
        <div id="new-method" class="method-detail ">
          <a name="method-c-new"></a>

          
          <div class="method-heading">
            <span class="method-name">new</span><span
              class="method-args">(klass, table)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="new-source">
<pre>
<span class="ruby-comment"># File lib/active_record/relation.rb, line 18</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">klass</span>, <span class="ruby-identifier">table</span>)
  <span class="ruby-ivar">@klass</span>, <span class="ruby-ivar">@table</span> = <span class="ruby-identifier">klass</span>, <span class="ruby-identifier">table</span>

  <span class="ruby-ivar">@implicit_readonly</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@loaded</span>            = <span class="ruby-keyword">false</span>
  <span class="ruby-ivar">@default_scoped</span>    = <span class="ruby-keyword">false</span>

  <span class="ruby-constant">SINGLE_VALUE_METHODS</span>.<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-identifier">instance_variable_set</span>(<span class="ruby-value">:&quot;@#{v}_value&quot;</span>, <span class="ruby-keyword">nil</span>)}
  (<span class="ruby-constant">ASSOCIATION_METHODS</span> <span class="ruby-operator">+</span> <span class="ruby-constant">MULTI_VALUE_METHODS</span>).<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-identifier">instance_variable_set</span>(<span class="ruby-value">:&quot;@#{v}_values&quot;</span>, [])}
  <span class="ruby-ivar">@extensions</span> = []
  <span class="ruby-ivar">@create_with_value</span> = {}
<span class="ruby-keyword">end</span></pre>
            </div><!-- new-source -->
            
          </div>

          

          
        </div><!-- new-method -->

      
      </div><!-- public-class-method-details -->
    
      <div id="public-instance-method-details" class="method-section section">
        <h3 class="section-header">Public Instance Methods</h3>

      
        <div id="3D-3D-method" class="method-detail ">
          <a name="method-i-3D-3D"></a>

          
          <div class="method-heading">
            <span class="method-name">==</span><span
              class="method-args">(other)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="3D-3D-source">
<pre>
<span class="ruby-comment"># File lib/active_record/relation.rb, line 487</span>
<span class="ruby-keyword">def</span> <span class="ruby-operator">==</span>(<span class="ruby-identifier">other</span>)
  <span class="ruby-keyword">case</span> <span class="ruby-identifier">other</span>
  <span class="ruby-keyword">when</span> <span class="ruby-constant">Relation</span>
    <span class="ruby-identifier">other</span>.<span class="ruby-identifier">to_sql</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">to_sql</span>
  <span class="ruby-keyword">when</span> <span class="ruby-constant">Array</span>
    <span class="ruby-identifier">to_a</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">other</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- 3D-3D-source -->
            
          </div>

          

          
        </div><!-- 3D-3D-method -->

      
        <div id="any-3F-method" class="method-detail ">
          <a name="method-i-any-3F"></a>

          
          <div class="method-heading">
            <span class="method-name">any?</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="any-3F-source">
<pre>
<span class="ruby-comment"># File lib/active_record/relation.rb, line 213</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">any?</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">block_given?</span>
    <span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">any?</span> { <span class="ruby-operator">|</span>*<span class="ruby-identifier">block_args</span><span class="ruby-operator">|</span> <span class="ruby-keyword">yield</span>(*<span class="ruby-identifier">block_args</span>) }
  <span class="ruby-keyword">else</span>
    <span class="ruby-operator">!</span><span class="ruby-identifier">empty?</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- any-3F-source -->
            
          </div>

          

          
        </div><!-- any-3F-method -->

      
        <div id="build-method" class="method-detail method-alias">
          <a name="method-i-build"></a>

          
          <div class="method-heading">
            <span class="method-name">build</span><span
              class="method-args">(*args, &block)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
          </div>

          

          
          <div class="aliases">
            Alias for: <a href="Relation.html#method-i-new">new</a>
          </div>
          
        </div><!-- build-method -->

      
        <div id="create-method" class="method-detail ">
          <a name="method-i-create"></a>

          
          <div class="method-heading">
            <span class="method-name">create</span><span
              class="method-args">(*args, &block)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="create-source">
<pre>
<span class="ruby-comment"># File lib/active_record/relation.rb, line 85</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">create</span>(*<span class="ruby-identifier">args</span>, &amp;<span class="ruby-identifier">block</span>)
  <span class="ruby-identifier">scoping</span> { <span class="ruby-ivar">@klass</span>.<span class="ruby-identifier">create</span>(*<span class="ruby-identifier">args</span>, &amp;<span class="ruby-identifier">block</span>) }
<span class="ruby-keyword">end</span></pre>
            </div><!-- create-source -->
            
          </div>

          

          
        </div><!-- create-method -->

      
        <div id="create-21-method" class="method-detail ">
          <a name="method-i-create-21"></a>

          
          <div class="method-heading">
            <span class="method-name">create!</span><span
              class="method-args">(*args, &block)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="create-21-source">
<pre>
<span class="ruby-comment"># File lib/active_record/relation.rb, line 89</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">create!</span>(*<span class="ruby-identifier">args</span>, &amp;<span class="ruby-identifier">block</span>)
  <span class="ruby-identifier">scoping</span> { <span class="ruby-ivar">@klass</span>.<span class="ruby-identifier">create!</span>(*<span class="ruby-identifier">args</span>, &amp;<span class="ruby-identifier">block</span>) }
<span class="ruby-keyword">end</span></pre>
            </div><!-- create-21-source -->
            
          </div>

          

          
        </div><!-- create-21-method -->

      
        <div id="delete-method" class="method-detail ">
          <a name="method-i-delete"></a>

          
          <div class="method-heading">
            <span class="method-name">delete</span><span
              class="method-args">(id_or_array)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Deletes the row with a primary key matching the <tt>id</tt> argument, using
a SQL <tt>DELETE</tt> statement, and returns the number of rows deleted.
Active Record objects are not instantiated, so the object’s callbacks are
not executed, including any <tt>:dependent</tt> association options or <a
href="Observer.html">Observer</a> methods.</p>

<p>You can delete multiple rows at once by passing an Array of <tt>id</tt>s.</p>

<p>Note: Although it is often much faster than the alternative,
<tt>#destroy</tt>, skipping callbacks might bypass business logic in your
application that ensures referential integrity or performs other essential
jobs.</p>

<h4>Examples</h4>

<pre># Delete a single row
Todo.delete(1)

# Delete multiple rows
Todo.delete([2,3,4])</pre>
            

            
            <div class="method-source-code" id="delete-source">
<pre>
<span class="ruby-comment"># File lib/active_record/relation.rb, line 439</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">delete</span>(<span class="ruby-identifier">id_or_array</span>)
  <span class="ruby-constant">IdentityMap</span>.<span class="ruby-identifier">remove_by_id</span>(<span class="ruby-keyword">self</span>.<span class="ruby-identifier">symbolized_base_class</span>, <span class="ruby-identifier">id_or_array</span>) <span class="ruby-keyword">if</span> <span class="ruby-constant">IdentityMap</span>.<span class="ruby-identifier">enabled?</span>
  <span class="ruby-identifier">where</span>(<span class="ruby-identifier">primary_key</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">id_or_array</span>).<span class="ruby-identifier">delete_all</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- delete-source -->
            
          </div>

          

          
        </div><!-- delete-method -->

      
        <div id="delete_all-method" class="method-detail ">
          <a name="method-i-delete_all"></a>

          
          <div class="method-heading">
            <span class="method-name">delete_all</span><span
              class="method-args">(conditions = nil)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Deletes the records matching <tt>conditions</tt> without instantiating the
records first, and hence not calling the <tt>destroy</tt> method nor
invoking callbacks. This is a single SQL DELETE statement that goes
straight to the database, much more efficient than <tt>destroy_all</tt>. Be
careful with relations though, in particular <tt>:dependent</tt> rules
defined on associations are not honored. Returns the number of rows
affected.</p>

<h4>Parameters</h4>
<ul><li>
<p><tt>conditions</tt> - Conditions are specified the same way as with
<tt>find</tt> method.</p>
</li></ul>

<h4>Example</h4>

<pre>Post.delete_all(&quot;person_id = 5 AND (category = 'Something' OR category = 'Else')&quot;)
Post.delete_all([&quot;person_id = ? AND (category = ? OR category = ?)&quot;, 5, 'Something', 'Else'])
Post.where(:person_id =&gt; 5).where(:category =&gt; ['Something', 'Else']).delete_all</pre>

<p>Both calls delete the affected posts all at once with a single DELETE
statement. If you need to destroy dependent associations or call your
<tt>before_*</tt> or <tt>after_destroy</tt> callbacks, use the
<tt>destroy_all</tt> method instead.</p>
            

            
            <div class="method-source-code" id="delete_all-source">
<pre>
<span class="ruby-comment"># File lib/active_record/relation.rb, line 404</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">delete_all</span>(<span class="ruby-identifier">conditions</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">ActiveRecordError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;delete_all doesn't support limit scope&quot;</span>) <span class="ruby-keyword">if</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">limit_value</span>

  <span class="ruby-constant">IdentityMap</span>.<span class="ruby-identifier">repository</span>[<span class="ruby-identifier">symbolized_base_class</span>] = {} <span class="ruby-keyword">if</span> <span class="ruby-constant">IdentityMap</span>.<span class="ruby-identifier">enabled?</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">conditions</span>
    <span class="ruby-identifier">where</span>(<span class="ruby-identifier">conditions</span>).<span class="ruby-identifier">delete_all</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">statement</span> = <span class="ruby-identifier">arel</span>.<span class="ruby-identifier">compile_delete</span>
    <span class="ruby-identifier">affected</span> = <span class="ruby-ivar">@klass</span>.<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">statement</span>, <span class="ruby-string">'SQL'</span>, <span class="ruby-identifier">bind_values</span>)

    <span class="ruby-identifier">reset</span>
    <span class="ruby-identifier">affected</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- delete_all-source -->
            
          </div>

          

          
        </div><!-- delete_all-method -->

      
        <div id="destroy-method" class="method-detail ">
          <a name="method-i-destroy"></a>

          
          <div class="method-heading">
            <span class="method-name">destroy</span><span
              class="method-args">(id)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Destroy an object (or multiple objects) that has the given id, the object
is instantiated first, therefore all callbacks and filters are fired off
before the object is deleted. This method is less efficient than
ActiveRecord#delete but allows cleanup methods and other actions to be run.</p>

<p>This essentially finds the object (or multiple objects) with the given id,
creates a new object from the attributes, and then calls destroy on it.</p>

<h4>Parameters</h4>
<ul><li>
<p><tt>id</tt> - Can be either an Integer or an Array of Integers.</p>
</li></ul>

<h4>Examples</h4>

<pre># Destroy a single object
Todo.destroy(1)

# Destroy multiple objects
todos = [1,2,3]
Todo.destroy(todos)</pre>
            

            
            <div class="method-source-code" id="destroy-source">
<pre>
<span class="ruby-comment"># File lib/active_record/relation.rb, line 377</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">destroy</span>(<span class="ruby-identifier">id</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">id</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>)
    <span class="ruby-identifier">id</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">one_id</span><span class="ruby-operator">|</span> <span class="ruby-identifier">destroy</span>(<span class="ruby-identifier">one_id</span>) }
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">find</span>(<span class="ruby-identifier">id</span>).<span class="ruby-identifier">destroy</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- destroy-source -->
            
          </div>

          

          
        </div><!-- destroy-method -->

      
        <div id="destroy_all-method" class="method-detail ">
          <a name="method-i-destroy_all"></a>

          
          <div class="method-heading">
            <span class="method-name">destroy_all</span><span
              class="method-args">(conditions = nil)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Destroys the records matching <tt>conditions</tt> by instantiating each
record and calling its <tt>destroy</tt> method. Each object’s callbacks are
executed (including <tt>:dependent</tt> association options and
<tt>before_destroy</tt>/<tt>after_destroy</tt> <a
href="Observer.html">Observer</a> methods). Returns the collection of
objects that were destroyed; each will be frozen, to reflect that no
changes should be made (since they can’t be persisted).</p>

<p>Note: Instantiation, callback execution, and deletion of each record can be
time consuming when you’re removing many records at once. It generates at
least one SQL <tt>DELETE</tt> query per record (or possibly more, to
enforce your callbacks). If you want to delete many rows quickly, without
concern for their associations or callbacks, use <tt>delete_all</tt>
instead.</p>

<h4>Parameters</h4>
<ul><li>
<p><tt>conditions</tt> - A string, array, or hash that specifies which records
to destroy. If omitted, all records are destroyed. See the Conditions
section in the introduction to <a href="Base.html">ActiveRecord::Base</a>
for more information.</p>
</li></ul>

<h4>Examples</h4>

<pre>Person.destroy_all(&quot;last_login &lt; '2004-04-04'&quot;)
Person.destroy_all(:status =&gt; &quot;inactive&quot;)
Person.where(:age =&gt; 0..18).destroy_all</pre>
            

            
            <div class="method-source-code" id="destroy_all-source">
<pre>
<span class="ruby-comment"># File lib/active_record/relation.rb, line 350</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">destroy_all</span>(<span class="ruby-identifier">conditions</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">conditions</span>
    <span class="ruby-identifier">where</span>(<span class="ruby-identifier">conditions</span>).<span class="ruby-identifier">destroy_all</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">object</span><span class="ruby-operator">|</span> <span class="ruby-identifier">object</span>.<span class="ruby-identifier">destroy</span> }.<span class="ruby-identifier">tap</span> { <span class="ruby-identifier">reset</span> }
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- destroy_all-source -->
            
          </div>

          

          
        </div><!-- destroy_all-method -->

      
        <div id="eager_loading-3F-method" class="method-detail ">
          <a name="method-i-eager_loading-3F"></a>

          
          <div class="method-heading">
            <span class="method-name">eager_loading?</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="eager_loading-3F-source">
<pre>
<span class="ruby-comment"># File lib/active_record/relation.rb, line 473</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">eager_loading?</span>
  <span class="ruby-ivar">@should_eager_load</span> <span class="ruby-operator">||=</span>
    <span class="ruby-ivar">@eager_load_values</span>.<span class="ruby-identifier">any?</span> <span class="ruby-operator">||</span>
    <span class="ruby-ivar">@includes_values</span>.<span class="ruby-identifier">any?</span> <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-identifier">joined_includes_values</span>.<span class="ruby-identifier">any?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">references_eager_loaded_tables?</span>)
<span class="ruby-keyword">end</span></pre>
            </div><!-- eager_loading-3F-source -->
            
          </div>

          

          
        </div><!-- eager_loading-3F-method -->

      
        <div id="empty-3F-method" class="method-detail ">
          <a name="method-i-empty-3F"></a>

          
          <div class="method-heading">
            <span class="method-name">empty?</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Returns true if there are no records.</p>
            

            
            <div class="method-source-code" id="empty-3F-source">
<pre>
<span class="ruby-comment"># File lib/active_record/relation.rb, line 206</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">empty?</span>
  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@records</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">loaded?</span>

  <span class="ruby-identifier">c</span> = <span class="ruby-identifier">count</span>
  <span class="ruby-identifier">c</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:zero?</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">zero?</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">empty?</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- empty-3F-source -->
            
          </div>

          

          
        </div><!-- empty-3F-method -->

      
        <div id="explain-method" class="method-detail ">
          <a name="method-i-explain"></a>

          
          <div class="method-heading">
            <span class="method-name">explain</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Runs EXPLAIN on the query or queries triggered by this relation and returns
the result as a string. The string is formatted imitating the ones printed
by the database shell.</p>

<p>Note that this method actually runs the queries, since the results of some
are needed by the next ones when eager loading is going on.</p>

<p>Please see further details in the <a
href="http://edgeguides.rubyonrails.org/active_record_querying.html#running-explain">Active
Record Query Interface guide</a>.</p>
            

            
            <div class="method-source-code" id="explain-source">
<pre>
<span class="ruby-comment"># File lib/active_record/relation.rb, line 144</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">explain</span>
  <span class="ruby-identifier">_</span>, <span class="ruby-identifier">queries</span> = <span class="ruby-identifier">collecting_queries_for_explain</span> { <span class="ruby-identifier">exec_queries</span> }
  <span class="ruby-identifier">exec_explain</span>(<span class="ruby-identifier">queries</span>)
<span class="ruby-keyword">end</span></pre>
            </div><!-- explain-source -->
            
          </div>

          

          
        </div><!-- explain-method -->

      
        <div id="first_or_create-method" class="method-detail ">
          <a name="method-i-first_or_create"></a>

          
          <div class="method-heading">
            <span class="method-name">first_or_create</span><span
              class="method-args">(attributes = nil, options = {}, &block)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Tries to load the first record; if it fails, then <tt>create</tt> is called
with the same arguments as this method.</p>

<p>Expects arguments in the same format as <tt>Base.create</tt>.</p>

<h4>Examples</h4>

<pre># Find the first user named Penélope or create a new one.
User.where(:first_name =&gt; 'Penélope').first_or_create
# =&gt; &lt;User id: 1, first_name: 'Penélope', last_name: nil&gt;

# Find the first user named Penélope or create a new one.
# We already have one so the existing record will be returned.
User.where(:first_name =&gt; 'Penélope').first_or_create
# =&gt; &lt;User id: 1, first_name: 'Penélope', last_name: nil&gt;

# Find the first user named Scarlett or create a new one with a particular last name.
User.where(:first_name =&gt; 'Scarlett').first_or_create(:last_name =&gt; 'Johansson')
# =&gt; &lt;User id: 2, first_name: 'Scarlett', last_name: 'Johansson'&gt;

# Find the first user named Scarlett or create a new one with a different last name.
# We already have one so the existing record will be returned.
User.where(:first_name =&gt; 'Scarlett').first_or_create do |user|
  user.last_name = &quot;O'Hara&quot;
end
# =&gt; &lt;User id: 2, first_name: 'Scarlett', last_name: 'Johansson'&gt;</pre>
            

            
            <div class="method-source-code" id="first_or_create-source">
<pre>
<span class="ruby-comment"># File lib/active_record/relation.rb, line 117</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">first_or_create</span>(<span class="ruby-identifier">attributes</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">options</span> = {}, &amp;<span class="ruby-identifier">block</span>)
  <span class="ruby-identifier">first</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">create</span>(<span class="ruby-identifier">attributes</span>, <span class="ruby-identifier">options</span>, &amp;<span class="ruby-identifier">block</span>)
<span class="ruby-keyword">end</span></pre>
            </div><!-- first_or_create-source -->
            
          </div>

          

          
        </div><!-- first_or_create-method -->

      
        <div id="first_or_create-21-method" class="method-detail ">
          <a name="method-i-first_or_create-21"></a>

          
          <div class="method-heading">
            <span class="method-name">first_or_create!</span><span
              class="method-args">(attributes = nil, options = {}, &block)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Like <tt>first_or_create</tt> but calls <tt>create!</tt> so an exception is
raised if the created record is invalid.</p>

<p>Expects arguments in the same format as <tt>Base.create!</tt>.</p>
            

            
            <div class="method-source-code" id="first_or_create-21-source">
<pre>
<span class="ruby-comment"># File lib/active_record/relation.rb, line 124</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">first_or_create!</span>(<span class="ruby-identifier">attributes</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">options</span> = {}, &amp;<span class="ruby-identifier">block</span>)
  <span class="ruby-identifier">first</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">create!</span>(<span class="ruby-identifier">attributes</span>, <span class="ruby-identifier">options</span>, &amp;<span class="ruby-identifier">block</span>)
<span class="ruby-keyword">end</span></pre>
            </div><!-- first_or_create-21-source -->
            
          </div>

          

          
        </div><!-- first_or_create-21-method -->

      
        <div id="first_or_initialize-method" class="method-detail ">
          <a name="method-i-first_or_initialize"></a>

          
          <div class="method-heading">
            <span class="method-name">first_or_initialize</span><span
              class="method-args">(attributes = nil, options = {}, &block)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Like <tt>first_or_create</tt> but calls <tt>new</tt> instead of
<tt>create</tt>.</p>

<p>Expects arguments in the same format as <tt>Base.new</tt>.</p>
            

            
            <div class="method-source-code" id="first_or_initialize-source">
<pre>
<span class="ruby-comment"># File lib/active_record/relation.rb, line 131</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">first_or_initialize</span>(<span class="ruby-identifier">attributes</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">options</span> = {}, &amp;<span class="ruby-identifier">block</span>)
  <span class="ruby-identifier">first</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">new</span>(<span class="ruby-identifier">attributes</span>, <span class="ruby-identifier">options</span>, &amp;<span class="ruby-identifier">block</span>)
<span class="ruby-keyword">end</span></pre>
            </div><!-- first_or_initialize-source -->
            
          </div>

          

          
        </div><!-- first_or_initialize-method -->

      
        <div id="initialize_copy-method" class="method-detail ">
          <a name="method-i-initialize_copy"></a>

          
          <div class="method-heading">
            <span class="method-name">initialize_copy</span><span
              class="method-args">(other)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="initialize_copy-source">
<pre>
<span class="ruby-comment"># File lib/active_record/relation.rb, line 78</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize_copy</span>(<span class="ruby-identifier">other</span>)
  <span class="ruby-ivar">@bind_values</span> = <span class="ruby-ivar">@bind_values</span>.<span class="ruby-identifier">dup</span>
  <span class="ruby-identifier">reset</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- initialize_copy-source -->
            
          </div>

          

          
        </div><!-- initialize_copy-method -->

      
        <div id="insert-method" class="method-detail ">
          <a name="method-i-insert"></a>

          
          <div class="method-heading">
            <span class="method-name">insert</span><span
              class="method-args">(values)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="insert-source">
<pre>
<span class="ruby-comment"># File lib/active_record/relation.rb, line 31</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">insert</span>(<span class="ruby-identifier">values</span>)
  <span class="ruby-identifier">primary_key_value</span> = <span class="ruby-keyword">nil</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">primary_key</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">Hash</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">values</span>
    <span class="ruby-identifier">primary_key_value</span> = <span class="ruby-identifier">values</span>[<span class="ruby-identifier">values</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">find</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">k</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">k</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">primary_key</span>
    }]

    <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">primary_key_value</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">prefetch_primary_key?</span>(<span class="ruby-identifier">klass</span>.<span class="ruby-identifier">table_name</span>)
      <span class="ruby-identifier">primary_key_value</span> = <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">next_sequence_value</span>(<span class="ruby-identifier">klass</span>.<span class="ruby-identifier">sequence_name</span>)
      <span class="ruby-identifier">values</span>[<span class="ruby-identifier">klass</span>.<span class="ruby-identifier">arel_table</span>[<span class="ruby-identifier">klass</span>.<span class="ruby-identifier">primary_key</span>]] = <span class="ruby-identifier">primary_key_value</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">im</span> = <span class="ruby-identifier">arel</span>.<span class="ruby-identifier">create_insert</span>
  <span class="ruby-identifier">im</span>.<span class="ruby-identifier">into</span> <span class="ruby-ivar">@table</span>

  <span class="ruby-identifier">conn</span> = <span class="ruby-ivar">@klass</span>.<span class="ruby-identifier">connection</span>

  <span class="ruby-identifier">substitutes</span> = <span class="ruby-identifier">values</span>.<span class="ruby-identifier">sort_by</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">arel_attr</span>,<span class="ruby-identifier">_</span><span class="ruby-operator">|</span> <span class="ruby-identifier">arel_attr</span>.<span class="ruby-identifier">name</span> }
  <span class="ruby-identifier">binds</span>       = <span class="ruby-identifier">substitutes</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">arel_attr</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
    [<span class="ruby-ivar">@klass</span>.<span class="ruby-identifier">columns_hash</span>[<span class="ruby-identifier">arel_attr</span>.<span class="ruby-identifier">name</span>], <span class="ruby-identifier">value</span>]
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">substitutes</span>.<span class="ruby-identifier">each_with_index</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">tuple</span>, <span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">tuple</span>[<span class="ruby-value">1</span>] = <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">substitute_at</span>(<span class="ruby-identifier">binds</span>[<span class="ruby-identifier">i</span>][<span class="ruby-value">0</span>], <span class="ruby-identifier">i</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">values</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-comment"># empty insert</span>
    <span class="ruby-identifier">im</span>.<span class="ruby-identifier">values</span> = <span class="ruby-constant">Arel</span>.<span class="ruby-identifier">sql</span>(<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">empty_insert_statement_value</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">im</span>.<span class="ruby-identifier">insert</span> <span class="ruby-identifier">substitutes</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">insert</span>(
    <span class="ruby-identifier">im</span>,
    <span class="ruby-string">'SQL'</span>,
    <span class="ruby-identifier">primary_key</span>,
    <span class="ruby-identifier">primary_key_value</span>,
    <span class="ruby-keyword">nil</span>,
    <span class="ruby-identifier">binds</span>)
<span class="ruby-keyword">end</span></pre>
            </div><!-- insert-source -->
            
          </div>

          

          
        </div><!-- insert-method -->

      
        <div id="inspect-method" class="method-detail ">
          <a name="method-i-inspect"></a>

          
          <div class="method-heading">
            <span class="method-name">inspect</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="inspect-source">
<pre>
<span class="ruby-comment"># File lib/active_record/relation.rb, line 496</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">inspect</span>
  <span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">inspect</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- inspect-source -->
            
          </div>

          

          
        </div><!-- inspect-method -->

      
        <div id="joined_includes_values-method" class="method-detail ">
          <a name="method-i-joined_includes_values"></a>

          
          <div class="method-heading">
            <span class="method-name">joined_includes_values</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Joins that are also marked for preloading. In which case we should just
eager load them. Note that this is a naive implementation because we could
have strings and symbols which represent the same association, but that
aren’t matched by this. Also, we could have nested hashes which partially
match, e.g. { :a =&gt; :b } &amp; { :a =&gt; [:b, :c] }</p>
            

            
            <div class="method-source-code" id="joined_includes_values-source">
<pre>
<span class="ruby-comment"># File lib/active_record/relation.rb, line 483</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">joined_includes_values</span>
  <span class="ruby-ivar">@includes_values</span> &amp; <span class="ruby-ivar">@joins_values</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- joined_includes_values-source -->
            
          </div>

          

          
        </div><!-- joined_includes_values-method -->

      
        <div id="many-3F-method" class="method-detail ">
          <a name="method-i-many-3F"></a>

          
          <div class="method-heading">
            <span class="method-name">many?</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="many-3F-source">
<pre>
<span class="ruby-comment"># File lib/active_record/relation.rb, line 221</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">many?</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">block_given?</span>
    <span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">many?</span> { <span class="ruby-operator">|</span>*<span class="ruby-identifier">block_args</span><span class="ruby-operator">|</span> <span class="ruby-keyword">yield</span>(*<span class="ruby-identifier">block_args</span>) }
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@limit_value</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">many?</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- many-3F-source -->
            
          </div>

          

          
        </div><!-- many-3F-method -->

      
        <div id="new-method" class="method-detail ">
          <a name="method-i-new"></a>

          
          <div class="method-heading">
            <span class="method-name">new</span><span
              class="method-args">(*args, &block)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="new-source">
<pre>
<span class="ruby-comment"># File lib/active_record/relation.rb, line 74</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">new</span>(*<span class="ruby-identifier">args</span>, &amp;<span class="ruby-identifier">block</span>)
  <span class="ruby-identifier">scoping</span> { <span class="ruby-ivar">@klass</span>.<span class="ruby-identifier">new</span>(*<span class="ruby-identifier">args</span>, &amp;<span class="ruby-identifier">block</span>) }
<span class="ruby-keyword">end</span></pre>
            </div><!-- new-source -->
            
          </div>

          
          <div class="aliases">
            Also aliased as: <a href="Relation.html#method-i-build">build</a>
          </div>
          

          
        </div><!-- new-method -->

      
        <div id="reload-method" class="method-detail ">
          <a name="method-i-reload"></a>

          
          <div class="method-heading">
            <span class="method-name">reload</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="reload-source">
<pre>
<span class="ruby-comment"># File lib/active_record/relation.rb, line 444</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">reload</span>
  <span class="ruby-identifier">reset</span>
  <span class="ruby-identifier">to_a</span> <span class="ruby-comment"># force reload</span>
  <span class="ruby-keyword">self</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- reload-source -->
            
          </div>

          

          
        </div><!-- reload-method -->

      
        <div id="reset-method" class="method-detail ">
          <a name="method-i-reset"></a>

          
          <div class="method-heading">
            <span class="method-name">reset</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="reset-source">
<pre>
<span class="ruby-comment"># File lib/active_record/relation.rb, line 450</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">reset</span>
  <span class="ruby-ivar">@first</span> = <span class="ruby-ivar">@last</span> = <span class="ruby-ivar">@to_sql</span> = <span class="ruby-ivar">@order_clause</span> = <span class="ruby-ivar">@scope_for_create</span> = <span class="ruby-ivar">@arel</span> = <span class="ruby-ivar">@loaded</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@should_eager_load</span> = <span class="ruby-ivar">@join_dependency</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@records</span> = []
  <span class="ruby-keyword">self</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- reset-source -->
            
          </div>

          

          
        </div><!-- reset-method -->

      
        <div id="scope_for_create-method" class="method-detail ">
          <a name="method-i-scope_for_create"></a>

          
          <div class="method-heading">
            <span class="method-name">scope_for_create</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="scope_for_create-source">
<pre>
<span class="ruby-comment"># File lib/active_record/relation.rb, line 469</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">scope_for_create</span>
  <span class="ruby-ivar">@scope_for_create</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">where_values_hash</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">create_with_value</span>)
<span class="ruby-keyword">end</span></pre>
            </div><!-- scope_for_create-source -->
            
          </div>

          

          
        </div><!-- scope_for_create-method -->

      
        <div id="scoping-method" class="method-detail ">
          <a name="method-i-scoping"></a>

          
          <div class="method-heading">
            <span class="method-name">scoping</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Scope all queries to the current scope.</p>

<h4>Example</h4>

<pre>Comment.where(:post_id =&gt; 1).scoping do
  Comment.first # SELECT * FROM comments WHERE post_id = 1
end</pre>

<p>Please check unscoped if you want to remove all previous scopes (including
the default_scope) during the execution of a block.</p>
            

            
            <div class="method-source-code" id="scoping-source">
<pre>
<span class="ruby-comment"># File lib/active_record/relation.rb, line 239</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">scoping</span>
  <span class="ruby-ivar">@klass</span>.<span class="ruby-identifier">with_scope</span>(<span class="ruby-keyword">self</span>, <span class="ruby-value">:overwrite</span>) { <span class="ruby-keyword">yield</span> }
<span class="ruby-keyword">end</span></pre>
            </div><!-- scoping-source -->
            
          </div>

          

          
        </div><!-- scoping-method -->

      
        <div id="size-method" class="method-detail ">
          <a name="method-i-size"></a>

          
          <div class="method-heading">
            <span class="method-name">size</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Returns size of the records.</p>
            

            
            <div class="method-source-code" id="size-source">
<pre>
<span class="ruby-comment"># File lib/active_record/relation.rb, line 201</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">size</span>
  <span class="ruby-identifier">loaded?</span> <span class="ruby-operator">?</span> <span class="ruby-ivar">@records</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">count</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- size-source -->
            
          </div>

          

          
        </div><!-- size-method -->

      
        <div id="to_a-method" class="method-detail ">
          <a name="method-i-to_a"></a>

          
          <div class="method-heading">
            <span class="method-name">to_a</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="to_a-source">
<pre>
<span class="ruby-comment"># File lib/active_record/relation.rb, line 149</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_a</span>
  <span class="ruby-comment"># We monitor here the entire execution rather than individual SELECTs</span>
  <span class="ruby-comment"># because from the point of view of the user fetching the records of a</span>
  <span class="ruby-comment"># relation is a single unit of work. You want to know if this call takes</span>
  <span class="ruby-comment"># too long, not if the individual queries take too long.</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># It could be the case that none of the queries involved surpass the</span>
  <span class="ruby-comment"># threshold, and at the same time the sum of them all does. The user</span>
  <span class="ruby-comment"># should get a query plan logged in that case.</span>
  <span class="ruby-identifier">logging_query_plan</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">exec_queries</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- to_a-source -->
            
          </div>

          

          
        </div><!-- to_a-method -->

      
        <div id="to_sql-method" class="method-detail ">
          <a name="method-i-to_sql"></a>

          
          <div class="method-heading">
            <span class="method-name">to_sql</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="to_sql-source">
<pre>
<span class="ruby-comment"># File lib/active_record/relation.rb, line 457</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_sql</span>
  <span class="ruby-ivar">@to_sql</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">to_sql</span>(<span class="ruby-identifier">arel</span>, <span class="ruby-ivar">@bind_values</span>.<span class="ruby-identifier">dup</span>)
<span class="ruby-keyword">end</span></pre>
            </div><!-- to_sql-source -->
            
          </div>

          

          
        </div><!-- to_sql-method -->

      
        <div id="update-method" class="method-detail ">
          <a name="method-i-update"></a>

          
          <div class="method-heading">
            <span class="method-name">update</span><span
              class="method-args">(id, attributes)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Updates an object (or multiple objects) and saves it to the database, if
validations pass. The resulting object is returned whether the object was
saved successfully to the database or not.</p>

<h4>Parameters</h4>
<ul><li>
<p><tt>id</tt> - This should be the id or an array of ids to be updated.</p>
</li><li>
<p><tt>attributes</tt> - This should be a hash of attributes or an array of
hashes.</p>
</li></ul>

<h4>Examples</h4>

<pre># Updates one record
Person.update(15, :user_name =&gt; 'Samuel', :group =&gt; 'expert')

# Updates multiple records
people = { 1 =&gt; { &quot;first_name&quot; =&gt; &quot;David&quot; }, 2 =&gt; { &quot;first_name&quot; =&gt; &quot;Jeremy&quot; } }
Person.update(people.keys, people.values)</pre>
            

            
            <div class="method-source-code" id="update-source">
<pre>
<span class="ruby-comment"># File lib/active_record/relation.rb, line 313</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">update</span>(<span class="ruby-identifier">id</span>, <span class="ruby-identifier">attributes</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">id</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>)
    <span class="ruby-identifier">id</span>.<span class="ruby-identifier">each</span>.<span class="ruby-identifier">with_index</span>.<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">one_id</span>, <span class="ruby-identifier">idx</span><span class="ruby-operator">|</span> <span class="ruby-identifier">update</span>(<span class="ruby-identifier">one_id</span>, <span class="ruby-identifier">attributes</span>[<span class="ruby-identifier">idx</span>])}
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">object</span> = <span class="ruby-identifier">find</span>(<span class="ruby-identifier">id</span>)
    <span class="ruby-identifier">object</span>.<span class="ruby-identifier">update_attributes</span>(<span class="ruby-identifier">attributes</span>)
    <span class="ruby-identifier">object</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- update-source -->
            
          </div>

          

          
        </div><!-- update-method -->

      
        <div id="update_all-method" class="method-detail ">
          <a name="method-i-update_all"></a>

          
          <div class="method-heading">
            <span class="method-name">update_all</span><span
              class="method-args">(updates, conditions = nil, options = {})</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Updates all records with details given if they match a set of conditions
supplied, limits and order can also be supplied. This method constructs a
single SQL UPDATE statement and sends it straight to the database. It does
not instantiate the involved models and it does not trigger Active Record
callbacks or validations.</p>

<h4>Parameters</h4>
<ul><li>
<p><tt>updates</tt> - A string, array, or hash representing the SET part of an
SQL statement.</p>
</li><li>
<p><tt>conditions</tt> - A string, array, or hash representing the WHERE part
of an SQL statement. See conditions in the intro.</p>
</li><li>
<p><tt>options</tt> - Additional options are <tt>:limit</tt> and
<tt>:order</tt>, see the examples for usage.</p>
</li></ul>

<h4>Examples</h4>

<pre># Update all customers with the given attributes
Customer.update_all :wants_email =&gt; true

# Update all books with 'Rails' in their title
Book.update_all &quot;author = 'David'&quot;, &quot;title LIKE '%Rails%'&quot;

# Update all avatars migrated more than a week ago
Avatar.update_all ['migrated_at = ?', Time.now.utc], ['migrated_at &gt; ?', 1.week.ago]

# Update all books that match conditions, but limit it to 5 ordered by date
Book.update_all &quot;author = 'David'&quot;, &quot;title LIKE '%Rails%'&quot;, :order =&gt; 'created_at', :limit =&gt; 5

# Conditions from the current relation also works
Book.where('title LIKE ?', '%Rails%').update_all(:author =&gt; 'David')

# The same idea applies to limit and order
Book.where('title LIKE ?', '%Rails%').order(:created_at).limit(5).update_all(:author =&gt; 'David')</pre>
            

            
            <div class="method-source-code" id="update_all-source">
<pre>
<span class="ruby-comment"># File lib/active_record/relation.rb, line 274</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">update_all</span>(<span class="ruby-identifier">updates</span>, <span class="ruby-identifier">conditions</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-constant">IdentityMap</span>.<span class="ruby-identifier">repository</span>[<span class="ruby-identifier">symbolized_base_class</span>].<span class="ruby-identifier">clear</span> <span class="ruby-keyword">if</span> <span class="ruby-constant">IdentityMap</span>.<span class="ruby-identifier">enabled?</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">conditions</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">present?</span>
    <span class="ruby-identifier">where</span>(<span class="ruby-identifier">conditions</span>).<span class="ruby-identifier">apply_finder_options</span>(<span class="ruby-identifier">options</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-value">:limit</span>, <span class="ruby-value">:order</span>)).<span class="ruby-identifier">update_all</span>(<span class="ruby-identifier">updates</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">stmt</span> = <span class="ruby-constant">Arel</span><span class="ruby-operator">::</span><span class="ruby-constant">UpdateManager</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">arel</span>.<span class="ruby-identifier">engine</span>)

    <span class="ruby-identifier">stmt</span>.<span class="ruby-identifier">set</span> <span class="ruby-constant">Arel</span>.<span class="ruby-identifier">sql</span>(<span class="ruby-ivar">@klass</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:sanitize_sql_for_assignment</span>, <span class="ruby-identifier">updates</span>))
    <span class="ruby-identifier">stmt</span>.<span class="ruby-identifier">table</span>(<span class="ruby-identifier">table</span>)
    <span class="ruby-identifier">stmt</span>.<span class="ruby-identifier">key</span> = <span class="ruby-identifier">table</span>[<span class="ruby-identifier">primary_key</span>]

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">joins_values</span>.<span class="ruby-identifier">any?</span>
      <span class="ruby-ivar">@klass</span>.<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">join_to_update</span>(<span class="ruby-identifier">stmt</span>, <span class="ruby-identifier">arel</span>)
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">stmt</span>.<span class="ruby-identifier">take</span>(<span class="ruby-identifier">arel</span>.<span class="ruby-identifier">limit</span>)
      <span class="ruby-identifier">stmt</span>.<span class="ruby-identifier">order</span>(*<span class="ruby-identifier">arel</span>.<span class="ruby-identifier">orders</span>)
      <span class="ruby-identifier">stmt</span>.<span class="ruby-identifier">wheres</span> = <span class="ruby-identifier">arel</span>.<span class="ruby-identifier">constraints</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-ivar">@klass</span>.<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">update</span> <span class="ruby-identifier">stmt</span>, <span class="ruby-string">'SQL'</span>, <span class="ruby-identifier">bind_values</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- update_all-source -->
            
          </div>

          

          
        </div><!-- update_all-method -->

      
        <div id="where_values_hash-method" class="method-detail ">
          <a name="method-i-where_values_hash"></a>

          
          <div class="method-heading">
            <span class="method-name">where_values_hash</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="where_values_hash-source">
<pre>
<span class="ruby-comment"># File lib/active_record/relation.rb, line 461</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">where_values_hash</span>
  <span class="ruby-identifier">equalities</span> = <span class="ruby-identifier">with_default_scope</span>.<span class="ruby-identifier">where_values</span>.<span class="ruby-identifier">grep</span>(<span class="ruby-constant">Arel</span><span class="ruby-operator">::</span><span class="ruby-constant">Nodes</span><span class="ruby-operator">::</span><span class="ruby-constant">Equality</span>).<span class="ruby-identifier">find_all</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">node</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">node</span>.<span class="ruby-identifier">left</span>.<span class="ruby-identifier">relation</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">table_name</span>
  }

  <span class="ruby-constant">Hash</span>[<span class="ruby-identifier">equalities</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">where</span><span class="ruby-operator">|</span> [<span class="ruby-identifier">where</span>.<span class="ruby-identifier">left</span>.<span class="ruby-identifier">name</span>, <span class="ruby-identifier">where</span>.<span class="ruby-identifier">right</span>] }]
<span class="ruby-keyword">end</span></pre>
            </div><!-- where_values_hash-source -->
            
          </div>

          

          
        </div><!-- where_values_hash-method -->

      
      </div><!-- public-instance-method-details -->
    
    </div><!-- 5Buntitled-5D -->
  

  </div><!-- documentation -->

  <div id="validator-badges">
    <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
    <p><small>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish
      Rdoc Generator</a> 2</small>.</p>
  </div>

</body>
</html>

